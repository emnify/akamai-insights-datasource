{"version":3,"file":"module.js","mappings":"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","sources":["webpack://akamai-insights-datasource/./components/config-editor/ConfigEditor.css","webpack://akamai-insights-datasource/./styles/styles.css","webpack://akamai-insights-datasource/../node_modules/css-loader/dist/runtime/api.js","webpack://akamai-insights-datasource/../node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://akamai-insights-datasource/../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://akamai-insights-datasource/../node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://akamai-insights-datasource/../node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://akamai-insights-datasource/../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://akamai-insights-datasource/../node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://akamai-insights-datasource/../node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://akamai-insights-datasource/external amd \"@emotion/react\"","webpack://akamai-insights-datasource/external amd \"@grafana/data\"","webpack://akamai-insights-datasource/external amd \"@grafana/runtime\"","webpack://akamai-insights-datasource/external amd \"@grafana/ui\"","webpack://akamai-insights-datasource/external amd \"lodash\"","webpack://akamai-insights-datasource/external amd \"react\"","webpack://akamai-insights-datasource/external amd \"rxjs\"","webpack://akamai-insights-datasource/webpack/bootstrap","webpack://akamai-insights-datasource/webpack/runtime/compat get default export","webpack://akamai-insights-datasource/webpack/runtime/define property getters","webpack://akamai-insights-datasource/webpack/runtime/hasOwnProperty shorthand","webpack://akamai-insights-datasource/webpack/runtime/make namespace object","webpack://akamai-insights-datasource/webpack/runtime/nonce","webpack://akamai-insights-datasource/./components/config-editor/types.ts","webpack://akamai-insights-datasource/./components/config-editor/ConfigEditor.css?9c5e","webpack://akamai-insights-datasource/./styles/styles.css?0f3c","webpack://akamai-insights-datasource/./utils/utils.ts","webpack://akamai-insights-datasource/./components/query-editor/DataSourceForm/FormTypes.ts","webpack://akamai-insights-datasource/./components/query-editor/DataSourceForm/FilterEditor/FilterEditor.tsx","webpack://akamai-insights-datasource/./services/form.service.ts","webpack://akamai-insights-datasource/./components/query-editor/DataSourceForm/FilterEditor/FilterEditorRow.tsx","webpack://akamai-insights-datasource/../node_modules/@babel/runtime/helpers/esm/extends.js","webpack://akamai-insights-datasource/../node_modules/@emotion/unitless/dist/emotion-unitless.esm.js","webpack://akamai-insights-datasource/../node_modules/@emotion/memoize/dist/emotion-memoize.esm.js","webpack://akamai-insights-datasource/../node_modules/@emotion/serialize/dist/emotion-serialize.esm.js","webpack://akamai-insights-datasource/../node_modules/@emotion/use-insertion-effect-with-fallbacks/dist/emotion-use-insertion-effect-with-fallbacks.browser.esm.js","webpack://akamai-insights-datasource/../node_modules/@emotion/utils/dist/emotion-utils.browser.esm.js","webpack://akamai-insights-datasource/../node_modules/@emotion/is-prop-valid/dist/emotion-is-prop-valid.esm.js","webpack://akamai-insights-datasource/../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js","webpack://akamai-insights-datasource/../node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js","webpack://akamai-insights-datasource/../node_modules/@emotion/hash/dist/emotion-hash.esm.js","webpack://akamai-insights-datasource/./components/common/styled/ListIconsRow.tsx","webpack://akamai-insights-datasource/./components/query-editor/DataSourceForm/ListField/ListField.tsx","webpack://akamai-insights-datasource/./components/query-editor/DataSourceForm/SortEditor/SortByEditor.tsx","webpack://akamai-insights-datasource/./components/query-editor/DataSourceForm/SortEditor/SortByEditorRow.tsx","webpack://akamai-insights-datasource/./components/query-editor/DataSourceForm/DataSourceForm.tsx","webpack://akamai-insights-datasource/./types/discovery-api.model.ts","webpack://akamai-insights-datasource/./types/types.ts","webpack://akamai-insights-datasource/./services/datasource.service.ts","webpack://akamai-insights-datasource/./services/datasources-cascader.service.ts","webpack://akamai-insights-datasource/./module.ts","webpack://akamai-insights-datasource/./components/config-editor/ConfigEditor.tsx","webpack://akamai-insights-datasource/./components/query-editor/QueryEditor.tsx"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.credentials__container {\n  height: 200px;\n  width: 640px;\n}\n\n.credentials__textarea {\n  height: 150px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./components/config-editor/ConfigEditor.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAa;EACb,YAAY;AACd;;AAEA;EACE,aAAa;AACf\",\"sourcesContent\":[\".credentials__container {\\n  height: 200px;\\n  width: 640px;\\n}\\n\\n.credentials__textarea {\\n  height: 150px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.padding-left-20 {\n    padding-left: 20px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./styles/styles.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,kBAAkB;AACtB\",\"sourcesContent\":[\".padding-left-20 {\\n    padding-left: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","module.exports = __WEBPACK_EXTERNAL_MODULE__89__;","module.exports = __WEBPACK_EXTERNAL_MODULE__781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__531__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__241__;","module.exports = __WEBPACK_EXTERNAL_MODULE__959__;","module.exports = __WEBPACK_EXTERNAL_MODULE__269__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","export enum Secret {\n  ClientSecret = 'clientSecret',\n  Host = 'host',\n  AccessToken = 'accessToken',\n  ClientToken = 'clientToken'\n}\n\nexport const secretsNames = [ Secret.ClientSecret, Secret.Host, Secret.AccessToken, Secret.ClientToken ];\n\nexport const labelWidth = 20;\nexport const inputWidth = 60;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!./ConfigEditor.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!./ConfigEditor.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./styles.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./styles.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { SelectableValue } from '@grafana/data';\nimport { CascaderOption } from '@grafana/ui';\nimport { isEmpty, uniq } from 'lodash';\n\nimport { Enum, NameAware } from '../types/types';\n\nconst identityFn = (value: any) => value;\n\nexport const toSelectableValues = (values: NameAware[]): SelectableValue<string>[] => {\n  return values.map(({ name }) => stringToSelectableValue(name));\n};\n\nexport const stringsToSelectableValues = (values: string[] | undefined = [], labelMapFn: (val: string) => string = identityFn): SelectableValue<string>[] => {\n  return values.map(value => stringToSelectableValue(value, labelMapFn));\n};\n\nexport const stringToSelectableValue = (value: string, labelMapFn: (val: string) => string = identityFn): SelectableValue<string> => {\n  return { label: labelMapFn(value), value };\n};\n\nexport const enumToSelectableValues = (input: Enum): SelectableValue[] => {\n  return stringsToSelectableValues([ ...Object.values(input) ], prettyEnum);\n};\n\nexport const prettyEnum = (s: string): string => {\n  const result = s.replace(/_/g, ' ').toLowerCase();\n\n  return result.charAt(0).toUpperCase() + result.slice(1);\n};\n\nexport const splitByComma = (list: string[]): string [] => {\n  return uniq(\n    list\n      .map(val => val.split(','))\n      .flat()\n      .filter(val => !isEmpty(val))\n  );\n};\n\nexport const toCascaderOption = ({ value = '', label, items = [] }: Partial<CascaderOption>): CascaderOption => {\n  return {\n    value,\n    label: label ?? value,\n    items: items?.map(toCascaderOption)\n  };\n};\n","import { SelectableValue } from '@grafana/data';\nimport { groupBy } from 'lodash';\n\nimport { enumToSelectableValues, prettyEnum, stringsToSelectableValues } from '../../../utils/utils';\n\nexport const shortLabelWidth = 25;\nexport const mediumLabelWidth = 50;\n\nexport enum FilterType {\n  Dimension = 'Dimension',\n  Metric = 'Metric'\n}\n\nexport const filterTypeOptions = enumToSelectableValues(FilterType);\n\nexport const filterTypeOptionsMap = groupBy(filterTypeOptions, 'value');\n\nexport interface FilterFormModel {\n  type: SelectableValue<string>;\n  query: FilterQueryFormModel;\n}\n\nexport interface FilterQueryFormModel {\n  name?: SelectableValue<string>;\n  operator?: SelectableValue<string>;\n  expressions?: string[];\n}\n\nexport enum DimensionOperator {\n  InList = 'IN_LIST',\n  NotInList = 'NOT_IN_LIST',\n  MatchRegExp = 'MATCH_REGEXP',\n  NotMatchRegExp = 'NOT_MATCH_REGEXP',\n  BeginsWith = 'BEGINS_WITH',\n  NotBeginsWith = 'NOT_BEGINS_WITH',\n  EndsWith = 'ENDS_WITH',\n  NotEndsWith = 'NOT_ENDS_WITH',\n  Contains = 'CONTAINS',\n  NotContains = 'NOT_CONTAINS',\n  Exact = 'EXACT'\n}\n\nexport enum FilterValueType {\n  Text = 'TEXT',\n  Enum = 'ENUM'\n}\n\nexport const dimensionOperatorOptions = enumToSelectableValues(DimensionOperator);\n\nexport const authorizableOrEnumFiltersOperatorOptions = stringsToSelectableValues([ DimensionOperator.InList, DimensionOperator.NotInList ], prettyEnum);\n\nexport enum MetricOperator {\n  Equal = 'EQUAL',\n  NotEqual = 'NOT_EQUAL',\n  LessThan = 'LESS_THAN',\n  GreaterThan = 'GREATER_THAN'\n}\n\nexport const metricOperatorOptions = enumToSelectableValues(MetricOperator);\n\nexport interface SortByFormModel {\n  type?: SelectableValue<string>;\n  query: SortByQueryFormModel;\n}\n\nexport interface SortByQueryFormModel {\n  name?: SelectableValue<string>;\n  sortOrder?: SelectableValue<string>;\n}\n\nexport enum SortByOrder {\n  Ascending = 'ASCENDING',\n  Descending = 'DESCENDING'\n}\n\nexport const sortByOrderOptions = enumToSelectableValues(SortByOrder);\n","import { SelectableValue } from '@grafana/data';\nimport { InlineField, Input, Select, TagsInput } from '@grafana/ui';\nimport { first } from 'lodash';\nimport React, { Fragment, JSX } from 'react';\n\nimport { splitByComma } from '../../../../utils/utils';\nimport { FilterQueryFormModel, mediumLabelWidth, shortLabelWidth } from '../FormTypes';\n\nexport interface FilterQueryEditorProps {\n  model: FilterQueryFormModel;\n  names: SelectableValue<string>[];\n  operators: SelectableValue<string>[];\n  multiExpressions: boolean;\n  onChange: (query: FilterQueryFormModel) => void;\n}\n\nexport function FilterEditor({ model, names, operators, multiExpressions, onChange }: FilterQueryEditorProps): JSX.Element {\n  const ExpressionField = multiExpressions ?\n    <InlineField>\n      <TagsInput\n        placeholder=\"Expressions\"\n        width={mediumLabelWidth}\n        tags={model.expressions}\n        onChange={expressions => onChange({ ...model, expressions: splitByComma(expressions) })}\n      />\n    </InlineField> :\n    <InlineField>\n      <Input\n        placeholder=\"Expression\"\n        width={mediumLabelWidth}\n        value={first(model.expressions)}\n        onChange={event => onChange({ ...model, expressions: [ (event.target as any).value ] })}\n      />\n    </InlineField>;\n\n  return (\n    <Fragment>\n      <InlineField>\n        <Select\n          placeholder=\"Name\"\n          isClearable={false}\n          options={names}\n          width={shortLabelWidth}\n          value={model.name}\n          onChange={name => onChange({ ...model, name })}\n        />\n      </InlineField>\n\n      <InlineField>\n        <Select\n          placeholder=\"Operator\"\n          isClearable={false}\n          width={shortLabelWidth}\n          options={operators}\n          value={model.operator}\n          onChange={operator => onChange({ ...model, operator })}\n        />\n      </InlineField>\n\n      {ExpressionField}\n    </Fragment>\n  );\n}\n","import { SelectableValue } from '@grafana/data';\nimport { first, intersection, isEmpty, isUndefined, set } from 'lodash';\n\nimport {\n  authorizableOrEnumFiltersOperatorOptions,\n  dimensionOperatorOptions,\n  FilterFormModel,\n  FilterType,\n  filterTypeOptions,\n  filterTypeOptionsMap,\n  FilterValueType,\n  SortByFormModel,\n  sortByOrderOptions\n} from '../components/query-editor/DataSourceForm/FormTypes';\nimport { Dimension, DiscoveryApiModel, Metric } from '../types/discovery-api.model';\nimport { ExpressionType, FilterQuery, SortByQuery } from '../types/types';\nimport { prettyEnum, stringToSelectableValue } from '../utils/utils';\n\nexport class FormService {\n\n  private static readonly VARIABLE_REGEX = /\\${.+}/gm;\n\n  static creteEmptyFilter(defaultDimension: SelectableValue<string>): FilterFormModel {\n    return {\n      type: filterTypeOptions[ 0 ],\n      query: {\n        name: defaultDimension,\n        operator: dimensionOperatorOptions[ 0 ],\n        expressions: []\n      }\n    };\n  }\n\n  static creteEmptySortBy(defaultDimension: SelectableValue<string>): SortByFormModel {\n    return {\n      type: filterTypeOptions[ 0 ],\n      query: {\n        name: defaultDimension,\n        sortOrder: sortByOrderOptions[ 0 ]\n      }\n    };\n  }\n\n  static toValues(values: SelectableValue<string>[]): string[] {\n    return values.map(({ value }) => value as string)\n      .filter(value => value);\n  };\n\n  static toFilterFormModels(filterQueries: FilterQuery[] | undefined = [],\n                            dimensions: string[],\n                            metrics: string[]): FilterFormModel[] {\n    return filterQueries?.map(query => {\n      const filterName = query.dimensionName || query.metricName;\n      const filterType = FormService.guessFilterType(filterName, dimensions, metrics);\n\n      return filterType ? {\n        type: filterTypeOptionsMap[ filterType ][ 0 ],\n        query: {\n          name: filterName ? stringToSelectableValue(filterName) : undefined,\n          operator: query.operator ? stringToSelectableValue(query.operator, prettyEnum) : undefined,\n          expressions: (query.expressions?.length ? query.expressions : [ query.expression ])\n            .filter(val => !isUndefined(val))\n            .map(exp => `${exp}`)\n        }\n      } : {} as FilterFormModel;\n    }).filter(val => !isEmpty(val));\n  }\n\n  static toSortBysFormModel(filterQueries: SortByQuery[] | undefined = [],\n                            dimensions: string[],\n                            metrics: string[]): SortByFormModel[] {\n    return filterQueries?.map(query => {\n      const filterType = FormService.guessFilterType(query.name, dimensions, metrics);\n\n      return filterType ? {\n        type: filterTypeOptionsMap[ filterType ][ 0 ],\n        query: {\n          name: query.name ? stringToSelectableValue(query.name) : undefined,\n          sortOrder: query.sortOrder ? stringToSelectableValue(query.sortOrder, prettyEnum) : undefined\n        }\n      } : {} as SortByFormModel;\n    }).filter(val => !isEmpty(val));\n  }\n\n  static guessFilterType(value: string | undefined, dimensions: string[], metric: string[]): FilterType | undefined {\n    if (isUndefined(value)) {\n      return undefined;\n    }\n\n    if (dimensions.includes(value)) {\n      return FilterType.Dimension;\n    }\n\n    if (metric.includes(value)) {\n      return FilterType.Metric;\n    }\n\n    return undefined;\n  }\n\n  static toFilterQueries(rows: FilterFormModel[]): FilterQuery[] {\n    return rows.map(({ type, query: { name, operator, expressions } }) => {\n      const result: Partial<FilterQuery> = {\n        operator: operator?.value\n      };\n\n      if (type.value === FilterType.Dimension) {\n        set(result, 'dimensionName', name?.value);\n        set(result, 'expressions', FormService.toExpressions(expressions));\n      } else if (type.value === FilterType.Metric) {\n        set(result, 'metricName', name?.value);\n        set(result, 'expression', FormService.toExpression(first(expressions)));\n      }\n\n      return result;\n    });\n  }\n\n  private static toExpressions(expressions: string[] | undefined = []): ExpressionType[] {\n    return expressions.map(exp => FormService.toExpression(exp));\n  }\n\n  private static toExpression(expression: string | undefined = ''): ExpressionType {\n    let potentialNumber = Number(expression);\n\n    return !isNaN(potentialNumber) ? potentialNumber : expression;\n  }\n\n  static toSortByQueries(rows: SortByFormModel[]): SortByQuery[] {\n    return rows.map(({ query: { name, sortOrder } }) => ({\n      name: name?.value,\n      sortOrder: sortOrder?.value\n    }));\n  }\n\n  static getDimensionsOperatorsOptions({ query: { name } }: FilterFormModel, discoveryApiModel: DiscoveryApiModel): SelectableValue[] {\n    const model = discoveryApiModel.dimensions.find(filter => filter.name === name?.value);\n    return model?.filterType === FilterValueType.Enum || model?.authorizable ? authorizableOrEnumFiltersOperatorOptions : dimensionOperatorOptions;\n  }\n\n  static getIntersectedModelOptions(queryOptions: string[], modelOptions: Dimension[] | Metric[]): string[] {\n    const queryVariables = queryOptions.filter(value => FormService.VARIABLE_REGEX.test(value));\n    return [ ...intersection(queryOptions, modelOptions.map(({ name }) => name)), ...(queryVariables || []) ];\n  }\n\n}\n","import { SelectableValue } from '@grafana/data';\nimport { InlineField, InlineFieldRow, Select } from '@grafana/ui';\nimport React, { JSX } from 'react';\n\nimport '../../../../styles/styles.css';\nimport { FilterEditor } from './FilterEditor';\nimport { FormService } from '../../../../services/form.service';\nimport { DiscoveryApiModel } from '../../../../types/discovery-api.model';\nimport {\n  FilterFormModel,\n  FilterType,\n  filterTypeOptions,\n  metricOperatorOptions,\n  shortLabelWidth\n} from '../FormTypes';\n\ninterface FilterEditorProps {\n  model: FilterFormModel;\n  discoveryApiModel: DiscoveryApiModel;\n  dimensions: SelectableValue<string>[];\n  metrics: SelectableValue<string>[];\n  onChange: (value: FilterFormModel) => void;\n  style?: Partial<CSSStyleDeclaration>\n}\n\nfunction getFilterEditor(type: string | undefined,\n                         dimensions: SelectableValue<string>[],\n                         metrics: SelectableValue<string>[],\n                         model: FilterFormModel,\n                         discoveryApiModel: DiscoveryApiModel,\n                         onChange: (query: FilterFormModel) => void): JSX.Element {\n  switch (type) {\n    case FilterType.Dimension:\n      return (\n        <FilterEditor\n          model={model.query}\n          names={dimensions}\n          operators={FormService.getDimensionsOperatorsOptions(model, discoveryApiModel)}\n          multiExpressions={true}\n          onChange={query => onChange({ ...model, query })}\n        />\n      );\n    case FilterType.Metric:\n      return (\n        <FilterEditor\n          model={model.query}\n          names={metrics}\n          operators={metricOperatorOptions}\n          multiExpressions={false}\n          onChange={query => onChange({ ...model, query })}\n        />\n      );\n    default:\n      return <InlineField><span>Not implemented yet</span></InlineField>;\n  }\n}\n\nexport function FilterEditorRow({ model, discoveryApiModel, dimensions, metrics, onChange }: FilterEditorProps): JSX.Element {\n  const Editor = getFilterEditor(model.type?.value, dimensions, metrics, model, discoveryApiModel, onChange);\n\n  const changeFilterTypeQuery = (type: SelectableValue<string>): void => {\n    let updatedModel = {} as FilterFormModel;\n\n    if (type.value === FilterType.Dimension) {\n      updatedModel = FormService.creteEmptyFilter(dimensions[ 0 ]);\n    } else if (type.value === FilterType.Metric) {\n      updatedModel = FormService.creteEmptyFilter(metrics[ 0 ]);\n    }\n\n    onChange({ ...updatedModel, type });\n  };\n\n  return (\n    <InlineFieldRow className=\"padding-left-20\">\n      <InlineField>\n        <Select\n          isClearable={false}\n          width={shortLabelWidth}\n          options={filterTypeOptions}\n          value={model.type}\n          onChange={changeFilterTypeQuery}\n        />\n      </InlineField>\n\n      {Editor}\n    </InlineFieldRow>\n  );\n}\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","var unitlessKeys = {\n  animationIterationCount: 1,\n  aspectRatio: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  scale: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport { unitlessKeys as default };\n","function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport { memoize as default };\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar isDevelopment = false;\n\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = /* #__PURE__ */memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nvar noComponentSelectorMessage = 'Component selectors can only be used in conjunction with ' + '@emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware ' + 'compiler transform.';\n\nfunction handleInterpolation(mergedProps, registered, interpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  var componentSelector = interpolation;\n\n  if (componentSelector.__emotion_styles !== undefined) {\n\n    return componentSelector;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        var keyframes = interpolation;\n\n        if (keyframes.anim === 1) {\n          cursor = {\n            name: keyframes.name,\n            styles: keyframes.styles,\n            next: cursor\n          };\n          return keyframes.name;\n        }\n\n        var serializedStyles = interpolation;\n\n        if (serializedStyles.styles !== undefined) {\n          var next = serializedStyles.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = serializedStyles.styles + \";\";\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result);\n        }\n\n        break;\n      }\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  var asString = interpolation;\n\n  if (registered == null) {\n    return asString;\n  }\n\n  var cached = registered[asString];\n  return cached !== undefined ? cached : asString;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i]) + \";\";\n    }\n  } else {\n    for (var key in obj) {\n      var value = obj[key];\n\n      if (typeof value !== 'object') {\n        var asString = value;\n\n        if (registered != null && registered[asString] !== undefined) {\n          string += key + \"{\" + registered[asString] + \"}\";\n        } else if (isProcessableValue(asString)) {\n          string += processStyleName(key) + \":\" + processStyleValue(key, asString) + \";\";\n        }\n      } else {\n        if (key === 'NO_COMPONENT_SELECTOR' && isDevelopment) {\n          throw new Error(noComponentSelectorMessage);\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(key) + \":\" + processStyleValue(key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value);\n\n          switch (key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n\n                string += key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;{]+)\\s*(;|$)/g; // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\nvar cursor;\nfunction serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings);\n  } else {\n    var asTemplateStringsArr = strings;\n\n    styles += asTemplateStringsArr[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i]);\n\n    if (stringMode) {\n      var templateStringsArr = strings;\n\n      styles += templateStringsArr[i];\n    }\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n}\n\nexport { serializeStyles };\n","import * as React from 'react';\n\nvar syncFallback = function syncFallback(create) {\n  return create();\n};\n\nvar useInsertionEffect = React['useInsertion' + 'Effect'] ? React['useInsertion' + 'Effect'] : false;\nvar useInsertionEffectAlwaysWithSyncFallback = useInsertionEffect || syncFallback;\nvar useInsertionEffectWithLayoutFallback = useInsertionEffect || React.useLayoutEffect;\n\nexport { useInsertionEffectAlwaysWithSyncFallback, useInsertionEffectWithLayoutFallback };\n","var isBrowser = true;\n\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className] + \";\");\n    } else if (className) {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar registerStyles = function registerStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false ) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n};\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  registerStyles(cache, serialized, isStringTag);\n  var className = cache.key + \"-\" + serialized.name;\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      cache.insert(serialized === current ? \".\" + className : '', current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles, registerStyles };\n","import memoize from '@emotion/memoize';\n\n// eslint-disable-next-line no-undef\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar isPropValid = /* #__PURE__ */memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\nexport { isPropValid as default };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { withEmotionCache, ThemeContext } from '@emotion/react';\nimport { serializeStyles } from '@emotion/serialize';\nimport { useInsertionEffectAlwaysWithSyncFallback } from '@emotion/use-insertion-effect-with-fallbacks';\nimport { getRegisteredStyles, registerStyles, insertStyles } from '@emotion/utils';\nimport * as React from 'react';\nimport isPropValid from '@emotion/is-prop-valid';\n\nvar isDevelopment = false;\n\nvar testOmitPropsOnStringTag = isPropValid;\n\nvar testOmitPropsOnComponent = function testOmitPropsOnComponent(key) {\n  return key !== 'theme';\n};\n\nvar getDefaultShouldForwardProp = function getDefaultShouldForwardProp(tag) {\n  return typeof tag === 'string' && // 96 is one less than the char code\n  // for \"a\" so this is checking that\n  // it's a lowercase character\n  tag.charCodeAt(0) > 96 ? testOmitPropsOnStringTag : testOmitPropsOnComponent;\n};\nvar composeShouldForwardProps = function composeShouldForwardProps(tag, options, isReal) {\n  var shouldForwardProp;\n\n  if (options) {\n    var optionsShouldForwardProp = options.shouldForwardProp;\n    shouldForwardProp = tag.__emotion_forwardProp && optionsShouldForwardProp ? function (propName) {\n      return tag.__emotion_forwardProp(propName) && optionsShouldForwardProp(propName);\n    } : optionsShouldForwardProp;\n  }\n\n  if (typeof shouldForwardProp !== 'function' && isReal) {\n    shouldForwardProp = tag.__emotion_forwardProp;\n  }\n\n  return shouldForwardProp;\n};\n\nvar Insertion = function Insertion(_ref) {\n  var cache = _ref.cache,\n      serialized = _ref.serialized,\n      isStringTag = _ref.isStringTag;\n  registerStyles(cache, serialized, isStringTag);\n  useInsertionEffectAlwaysWithSyncFallback(function () {\n    return insertStyles(cache, serialized, isStringTag);\n  });\n\n  return null;\n};\n\nvar createStyled = function createStyled(tag, options) {\n\n  var isReal = tag.__emotion_real === tag;\n  var baseTag = isReal && tag.__emotion_base || tag;\n  var identifierName;\n  var targetClassName;\n\n  if (options !== undefined) {\n    identifierName = options.label;\n    targetClassName = options.target;\n  }\n\n  var shouldForwardProp = composeShouldForwardProps(tag, options, isReal);\n  var defaultShouldForwardProp = shouldForwardProp || getDefaultShouldForwardProp(baseTag);\n  var shouldUseAs = !defaultShouldForwardProp('as');\n  return function () {\n    // eslint-disable-next-line prefer-rest-params\n    var args = arguments;\n    var styles = isReal && tag.__emotion_styles !== undefined ? tag.__emotion_styles.slice(0) : [];\n\n    if (identifierName !== undefined) {\n      styles.push(\"label:\" + identifierName + \";\");\n    }\n\n    if (args[0] == null || args[0].raw === undefined) {\n      // eslint-disable-next-line prefer-spread\n      styles.push.apply(styles, args);\n    } else {\n      var templateStringsArr = args[0];\n\n      styles.push(templateStringsArr[0]);\n      var len = args.length;\n      var i = 1;\n\n      for (; i < len; i++) {\n\n        styles.push(args[i], templateStringsArr[i]);\n      }\n    }\n\n    var Styled = withEmotionCache(function (props, cache, ref) {\n      var FinalTag = shouldUseAs && props.as || baseTag;\n      var className = '';\n      var classInterpolations = [];\n      var mergedProps = props;\n\n      if (props.theme == null) {\n        mergedProps = {};\n\n        for (var key in props) {\n          mergedProps[key] = props[key];\n        }\n\n        mergedProps.theme = React.useContext(ThemeContext);\n      }\n\n      if (typeof props.className === 'string') {\n        className = getRegisteredStyles(cache.registered, classInterpolations, props.className);\n      } else if (props.className != null) {\n        className = props.className + \" \";\n      }\n\n      var serialized = serializeStyles(styles.concat(classInterpolations), cache.registered, mergedProps);\n      className += cache.key + \"-\" + serialized.name;\n\n      if (targetClassName !== undefined) {\n        className += \" \" + targetClassName;\n      }\n\n      var finalShouldForwardProp = shouldUseAs && shouldForwardProp === undefined ? getDefaultShouldForwardProp(FinalTag) : defaultShouldForwardProp;\n      var newProps = {};\n\n      for (var _key in props) {\n        if (shouldUseAs && _key === 'as') continue;\n\n        if (finalShouldForwardProp(_key)) {\n          newProps[_key] = props[_key];\n        }\n      }\n\n      newProps.className = className;\n\n      if (ref) {\n        newProps.ref = ref;\n      }\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Insertion, {\n        cache: cache,\n        serialized: serialized,\n        isStringTag: typeof FinalTag === 'string'\n      }), /*#__PURE__*/React.createElement(FinalTag, newProps));\n    });\n    Styled.displayName = identifierName !== undefined ? identifierName : \"Styled(\" + (typeof baseTag === 'string' ? baseTag : baseTag.displayName || baseTag.name || 'Component') + \")\";\n    Styled.defaultProps = tag.defaultProps;\n    Styled.__emotion_real = Styled;\n    Styled.__emotion_base = baseTag;\n    Styled.__emotion_styles = styles;\n    Styled.__emotion_forwardProp = shouldForwardProp;\n    Object.defineProperty(Styled, 'toString', {\n      value: function value() {\n        if (targetClassName === undefined && isDevelopment) {\n          return 'NO_COMPONENT_SELECTOR';\n        }\n\n        return \".\" + targetClassName;\n      }\n    });\n\n    Styled.withComponent = function (nextTag, nextOptions) {\n      var newStyled = createStyled(nextTag, _extends({}, options, nextOptions, {\n        shouldForwardProp: composeShouldForwardProps(Styled, nextOptions, true)\n      }));\n      return newStyled.apply(void 0, styles);\n    };\n\n    return Styled;\n  };\n};\n\nexport { createStyled as default };\n","import createStyled from '../base/dist/emotion-styled-base.browser.esm.js';\nimport '@babel/runtime/helpers/extends';\nimport '@emotion/react';\nimport '@emotion/serialize';\nimport '@emotion/use-insertion-effect-with-fallbacks';\nimport '@emotion/utils';\nimport 'react';\nimport '@emotion/is-prop-valid';\n\nvar tags = ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'big', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'section', 'select', 'small', 'source', 'span', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr', // SVG\n'circle', 'clipPath', 'defs', 'ellipse', 'foreignObject', 'g', 'image', 'line', 'linearGradient', 'mask', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'text', 'tspan'];\n\n// bind it to avoid mutating the original function\nvar styled = createStyled.bind(null);\ntags.forEach(function (tagName) {\n  styled[tagName] = styled(tagName);\n});\n\nexport { styled as default };\n","/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexport { murmur2 as default };\n","import styled from '@emotion/styled';\n\nexport const ListIconsRow = styled.div`\n    display: flex;\n    align-items: center;\n    height: 32px;\n`;\n","import {\n  IconButton,\n  InlineField,\n  InlineFieldRow\n} from '@grafana/ui';\nimport React, { Fragment, JSX } from 'react';\n\nimport { ListIconsRow } from '../../../common/styled/ListIconsRow';\nimport { shortLabelWidth } from '../FormTypes';\n\nexport interface ListFieldProps<T> {\n  fieldLabel: string;\n  fieldTooltip?: any;\n  resource: string;\n  rows: T[];\n  modelProvider: () => T;\n  onChange: (list: T[]) => void;\n  Editor: (model: T, index: number, onChange: (updatedModel: T, index: number) => void) => JSX.Element;\n}\n\nexport function ListField<T>({ fieldLabel, fieldTooltip, resource, rows, modelProvider, onChange, Editor }: ListFieldProps<T>): JSX.Element {\n  const onAdd = () => onChange([ ...rows, modelProvider() ]);\n\n  const onRemoveAll = () => onChange([]);\n\n  const onRemove = (index: number) => {\n    const listCopy = [ ...rows ];\n    listCopy.splice(index, 1);\n\n    onChange(listCopy);\n  };\n\n  const onChangeSingle = (updatedModel: T, index: number) => {\n    onChange(rows.map((model, i) => {\n      if (i === index) {\n        return {\n          ...model,\n          ...updatedModel\n        };\n      }\n\n      return model;\n    }));\n  };\n  \n  return (\n    <Fragment>\n      <InlineFieldRow>\n        <InlineField\n          label={fieldLabel}\n          tooltip={fieldTooltip}\n          labelWidth={shortLabelWidth}>\n          <ListIconsRow>\n            {rows?.length ? <IconButton name=\"trash-alt\" tooltip=\"Remove all\" onClick={onRemoveAll}/> : ''}\n            <IconButton\n              name=\"plus-circle\"\n              tooltip={`Add new ${resource}`}\n              onClick={onAdd}\n            />\n          </ListIconsRow>\n        </InlineField>\n      </InlineFieldRow>\n\n      {rows.map((model, index) => (\n        <InlineFieldRow key={index}>\n          { Editor(model, index, updated => onChangeSingle(updated, index)) }\n\n          <InlineField>\n            <ListIconsRow>\n              <IconButton\n                name=\"minus-circle\"\n                tooltip={`Remove ${resource}`}\n                onClick={() => onRemove(index)}\n              />\n            </ListIconsRow>\n          </InlineField>\n        </InlineFieldRow>)\n      )}\n    </Fragment>\n  );\n}\n","import { SelectableValue } from '@grafana/data';\nimport { InlineField, Select } from '@grafana/ui';\nimport React, { Fragment, JSX } from 'react';\n\nimport { shortLabelWidth, sortByOrderOptions, SortByQueryFormModel } from '../FormTypes';\n\nexport interface SortByEditorProps {\n  model: SortByQueryFormModel;\n  names: SelectableValue<string>[];\n  onChange: (query: SortByQueryFormModel) => void;\n}\n\nexport function SortByEditor({ model, names, onChange }: SortByEditorProps): JSX.Element {\n  return (\n    <Fragment>\n      <InlineField>\n        <Select\n          placeholder=\"Name\"\n          isClearable={false}\n          width={shortLabelWidth}\n          options={names}\n          value={model.name}\n          onChange={name => onChange({ ...model, name })}\n        />\n      </InlineField>\n\n      <InlineField>\n        <Select\n          placeholder=\"Sort order\"\n          isClearable={false}\n          width={shortLabelWidth}\n          options={sortByOrderOptions}\n          value={model.sortOrder}\n          onChange={sortOrder => onChange({ ...model, sortOrder } )}\n        />\n      </InlineField>\n    </Fragment>\n  );\n}\n","import { SelectableValue } from '@grafana/data';\nimport { InlineField, InlineFieldRow, Select } from '@grafana/ui';\nimport React, { JSX } from 'react';\nimport '../../../../styles/styles.css';\n\nimport { SortByEditor } from './SortByEditor';\nimport { FormService } from '../../../../services/form.service';\nimport {\n  FilterType,\n  filterTypeOptions,\n  shortLabelWidth,\n  SortByFormModel\n} from '../FormTypes';\n\ninterface SortByEditorProps {\n  model: SortByFormModel;\n  dimensions: SelectableValue<string>[];\n  metrics: SelectableValue<string>[];\n  onChange: (value: SortByFormModel) => void\n}\n\nfunction getSortByEditor(type: string | undefined,\n                         dimensions: SelectableValue<string>[],\n                         metrics: SelectableValue<string>[],\n                         model: SortByFormModel,\n                         onChange: (query: SortByFormModel) => void): JSX.Element {\n  switch (type) {\n    case FilterType.Dimension:\n      return (\n        <SortByEditor\n          model={model.query}\n          names={dimensions}\n          onChange={query => onChange({ ...model, query })}\n        />\n      );\n    case FilterType.Metric:\n      return (\n        <SortByEditor\n          model={model.query}\n          names={metrics}\n          onChange={query => onChange({ ...model, query  })}\n        />\n      );\n    default:\n      return <InlineField><span>Not implemented yet</span></InlineField>;\n  }\n}\n\nexport function SortByEditorRow({ model, dimensions, metrics, onChange }: SortByEditorProps): JSX.Element {\n  const Editor = getSortByEditor(model.type?.value, dimensions, metrics, model, onChange);\n\n  const changeFilterTypeQuery = (type: SelectableValue<string>): void => {\n    let updatedModel = {} as SortByFormModel;\n\n    if (type.value === FilterType.Dimension) {\n      updatedModel = FormService.creteEmptySortBy(dimensions[ 0 ]);\n    } else if (type.value === FilterType.Metric) {\n      updatedModel = FormService.creteEmptySortBy(metrics[ 0 ]);\n    }\n\n    onChange({ ...updatedModel, type });\n  };\n\n  return (\n    <InlineFieldRow className=\"padding-left-20\">\n      <InlineField>\n        <Select\n          isClearable={false}\n          width={shortLabelWidth}\n          options={filterTypeOptions}\n          value={model.type}\n          onChange={changeFilterTypeQuery}\n        />\n      </InlineField>\n\n      {Editor}\n    </InlineFieldRow>\n  );\n}\n","import { SelectableValue } from '@grafana/data';\nimport {\n  Alert,\n  Button,\n  InlineField,\n  InlineFieldRow,\n  MultiSelect,\n  VerticalGroup\n} from '@grafana/ui';\nimport { isEmpty, isNil } from 'lodash';\nimport React, { JSX, useState } from 'react';\n\nimport { FilterEditorRow } from './FilterEditor/FilterEditorRow';\nimport { FilterFormModel, mediumLabelWidth, shortLabelWidth, SortByFormModel } from './FormTypes';\nimport { ListField } from './ListField/ListField';\nimport { SortByEditorRow } from './SortEditor/SortByEditorRow';\nimport { DatasourceService } from '../../../services/datasource.service';\nimport { FormService } from '../../../services/form.service';\nimport { DiscoveryApiModel } from '../../../types/discovery-api.model';\nimport { MyQuery } from '../../../types/types';\nimport { stringsToSelectableValues, toSelectableValues } from '../../../utils/utils';\n\ninterface DataSourceFormProps {\n  model: DiscoveryApiModel,\n  datasource: DatasourceService,\n  query: MyQuery,\n  onRunQuery: () => void,\n  onChange: (value: MyQuery) => void\n}\n\nexport function DataSourceForm({ query, onChange, onRunQuery, model }: DataSourceFormProps): JSX.Element {\n  const { defaults: { defaultMetrics = [], defaultDimensions = [], defaultSortBys= [] } } = model;\n  const dimensionsOptions = toSelectableValues(model.dimensions);\n  const defaultDimensionsOptions = defaultDimensions ? stringsToSelectableValues(defaultDimensions) : [];\n  const metricsOptions = toSelectableValues(model.metrics);\n  const defaultMetricsOptions = defaultMetrics ? stringsToSelectableValues(defaultMetrics) : [];\n  const dimensionsValues = FormService.toValues(dimensionsOptions);\n  const metricsValues = FormService.toValues(metricsOptions);\n  const defaultSortBysOptions = defaultSortBys ? FormService.toSortBysFormModel(defaultSortBys, dimensionsValues, metricsValues) : [];\n\n  const [ dimensions, setDimensions ] = useState<SelectableValue[]>(\n    model.dimensions ? !isNil(query.dimensions) ? stringsToSelectableValues(FormService.getIntersectedModelOptions(query.dimensions, model.dimensions)) : defaultDimensionsOptions : []);\n  const [ metrics, setMetrics ] = useState<SelectableValue[]>(\n    model.metrics ? !isNil(query.metrics) ? stringsToSelectableValues(FormService.getIntersectedModelOptions(query.metrics, model.metrics)) : defaultMetricsOptions : []);\n  const [ filters, setFilters ] = useState<FilterFormModel[]>(model.metrics || model.dimensions ? FormService.toFilterFormModels(query.filters, dimensionsValues, metricsValues) : []);\n  const [ sortBys, setSortBys ] = useState<SortByFormModel[]>(\n    model.metrics && model.dimensions ? !isNil(query.sortBys) ? FormService.toSortBysFormModel(query.sortBys, dimensionsValues, metricsValues) : defaultSortBysOptions : []\n  );\n  const [ applyDisabled, setApplyDisabled ] = useState<boolean>(isEmpty(dimensions) && isEmpty(metrics));\n  const [ defaultValuesInfoVisible, setDefaultValuesInfoVisible ] = useState(!query.dimensions && !query.metrics);\n\n  const onClear = () => {\n    setDimensions([]);\n    setMetrics([]);\n    setFilters([]);\n    setSortBys([]);\n    onFormChange([], []);\n  };\n  const onRestoreDefault = () => {\n    setMetrics(defaultMetricsOptions);\n    setDimensions(defaultDimensionsOptions);\n    setSortBys(defaultSortBysOptions);\n    onFormChange(defaultDimensionsOptions, defaultMetricsOptions);\n  };\n  const onApply = () => {\n    const updatedQuery = {\n      ...query\n    };\n\n    updatedQuery.dimensions = FormService.toValues(dimensions);\n    updatedQuery.metrics = FormService.toValues(metrics);\n    updatedQuery.filters = FormService.toFilterQueries(filters);\n    updatedQuery.sortBys = FormService.toSortByQueries(sortBys);\n\n    onChange(updatedQuery);\n    onRunQuery();\n    setDefaultValuesInfoVisible(false);\n  };\n  const onFormChange = (selectedDimensions: SelectableValue<string>[], selectedMetrics: SelectableValue<string>[]) => {\n    setApplyDisabled(isEmpty(selectedDimensions) && isEmpty(selectedMetrics));\n    setDefaultValuesInfoVisible(false);\n  };\n\n  return (\n    <div>\n      {defaultValuesInfoVisible &&\n        <Alert title=\"Default values\" severity=\"info\">\n          <VerticalGroup>\n            Default values have been set for the form since the panel was opened for the first time or data for query was not saved.\n          </VerticalGroup>\n        </Alert>\n      }\n      <InlineField\n        label=\"Dimensions\"\n        labelWidth={shortLabelWidth}\n        tooltip=\"Array of dimensions for grouping results (i.e.['time5minutes', 'cpcode']). Maximum number of dimensions: 4.\">\n        <MultiSelect\n          isClearable={true}\n          width={mediumLabelWidth}\n          options={dimensionsOptions}\n          value={dimensions}\n          allowCustomValue={true}\n          onChange={values => {\n            setDimensions(values);\n            onFormChange(values, metrics);\n          }}\n        />\n      </InlineField>\n\n      <InlineField\n        label=\"Metrics\"\n        labelWidth={shortLabelWidth}\n        tooltip=\"Array of metrics requested (i.e.: ['edgeBytesSum', 'originHitsSum']).\">\n        <MultiSelect\n          isClearable={true}\n          width={mediumLabelWidth}\n          options={metricsOptions}\n          value={metrics}\n          allowCustomValue={true}\n          onChange={values => {\n            setMetrics(values);\n            onFormChange(dimensions, values);\n          }}\n        />\n      </InlineField>\n\n      <ListField\n        fieldLabel=\"Filters\"\n        fieldTooltip=\"Filters used to narrow down the results of the data. Filters are specified in terms of dimensions or metrics.\"\n        resource=\"Filter\"\n        rows={filters}\n        onChange={values => {\n          setFilters(values);\n          onFormChange(dimensions, metrics);\n        }}\n        modelProvider={() => FormService.creteEmptyFilter(dimensionsOptions[ 0 ])}\n        Editor={(filterModel, index, onSingleFilterChange) =>\n          <FilterEditorRow\n            key={index}\n            model={filterModel}\n            dimensions={dimensionsOptions}\n            metrics={metricsOptions}\n            discoveryApiModel={model}\n            onChange={updatedFilterModel => onSingleFilterChange(updatedFilterModel, index)}\n          />}\n      />\n\n      <ListField\n        fieldLabel=\"Sort Bys\"\n        fieldTooltip=\"Set sortBy settings for multiple columns. If not specified, the default values are used.\"\n        resource=\"Sort By\"\n        rows={sortBys}\n        onChange={values => {\n          setSortBys(values);\n          onFormChange(dimensions, metrics);\n        }}\n        modelProvider={() => FormService.creteEmptySortBy(dimensions[ 0 ])}\n        Editor={(sortByModel, index, onSingleSortByChange) =>\n          <SortByEditorRow\n            key={index}\n            model={sortByModel}\n            dimensions={dimensions}\n            metrics={metrics}\n            onChange={updatedSortByModel => onSingleSortByChange(updatedSortByModel, index)}\n          />}\n      />\n\n      <InlineFieldRow>\n        <InlineField>\n          <Button\n            fill=\"outline\"\n            type=\"reset\"\n            variant=\"destructive\"\n            onClick={onClear}>\n            Clear\n          </Button>\n        </InlineField>\n        <InlineField disabled={applyDisabled}>\n          <Button\n            type=\"submit\"\n            variant=\"primary\"\n            onClick={onApply}>\n            Apply\n          </Button>\n        </InlineField>\n        <InlineField>\n          <Button\n            type=\"reset\"\n            variant=\"secondary\"\n            onClick={onRestoreDefault}>\n            Restore defaults\n          </Button>\n        </InlineField>\n      </InlineFieldRow>\n    </div>\n  );\n}\n","import { DataQuery } from '@grafana/schema';\n\nexport interface DiscoveryApiModel extends DataQuery {\n  metrics: Metric[];\n  dimensions: Dimension[];\n  defaults: Defaults;\n}\n\nexport interface ReportsApiModel {\n  reports: Report[]\n}\n\nexport interface Report {\n  reportName: string;\n  reportLink: string;\n}\n\nexport interface Metric {\n  name: string;\n  type: DataType;\n}\n\nexport interface Dimension {\n  name: string;\n  type: DataType;\n  filterable: boolean;\n  filterType: string;\n  authorizable: boolean;\n  filterEnumValues?: string[];\n}\n\nexport interface Defaults {\n  defaultTimeRange?: DefaultTimeRange;\n  defaultMetrics?: string[];\n  defaultDimensions?: string[];\n  defaultSortBys?: DefaultSortBy[];\n}\n\nexport interface DefaultTimeRange {\n  start: string;\n  end: string;\n}\n\nexport interface DefaultSortBy {\n  name: string;\n  sortOrder: 'ASCENDING' | 'DESCENDING';\n}\n\nexport const initialModel: DiscoveryApiModel = {\n  metrics: [],\n  dimensions: [],\n  defaults: {},\n  refId: ''\n};\n\nexport enum DataType {\n  STRING = 'STRING',\n  LONG = 'LONG',\n  DOUBLE = 'DOUBLE',\n  TIMESTAMP_SEC = 'TIMESTAMP_SEC',\n  DATE_ISO8601 = 'DATE_ISO8601',\n  TIMESTAMP_MS = 'TIMESTAMP_MS'\n}\n\nexport const TimeDimensionsTypes = [ DataType.TIMESTAMP_SEC, DataType.DATE_ISO8601, DataType.TIMESTAMP_MS ];\n","import { DataSourceJsonData, DataSourcePluginOptionsEditorProps } from '@grafana/data';\nimport { DataQuery } from '@grafana/schema';\n\nexport interface MyQuery extends DataQuery {\n  reportLink?: string;\n  dimensions?: string[];\n  metrics?: string[];\n  filters?: FilterQuery[];\n  sortBys?: SortByQuery[];\n}\n\nexport interface FilterQuery {\n  metricName?: string;\n  dimensionName?: string;\n  operator?: string;\n  expressions?: ExpressionType[];\n  expression?: ExpressionType;\n}\n\nexport interface SortByQuery {\n  name?: string;\n  sortOrder?: string;\n}\n\nexport type ExpressionType = string | number;\n\nexport interface MyDataSourceOptions extends DataSourceJsonData {\n  clientSecret?: string;\n  host?: string;\n  accessToken?: string;\n  clientToken?: string;\n}\n\nexport interface DataSourceProps extends DataSourcePluginOptionsEditorProps<MyDataSourceOptions, MyDataSourceOptions> {}\n\nexport enum TestDataSourceResponseStatus {\n  Success = 'success',\n  Error = 'error'\n}\n\nexport interface NameAware {\n  name: string\n}\n\nexport interface Enum {\n  [id: string]: string;\n}\n\nexport const API_URL = '/reporting-api/v2/reports/';\n\nexport const VARIABLE_QUERY = 'variable-query';\n","import {\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  DataSourceVariableSupport,\n  FieldType,\n  MutableDataFrame,\n  TestDataSourceResponse,\n  VariableSupportType\n} from '@grafana/data';\nimport { BackendSrvRequest, DataSourceWithBackend, getBackendSrv, getTemplateSrv } from '@grafana/runtime';\nimport { isEmpty, omitBy, uniq } from 'lodash';\nimport {\n  catchError,\n  delay,\n  forkJoin,\n  lastValueFrom,\n  map,\n  Observable,\n  of,\n  tap\n} from 'rxjs';\n\nimport { Dimension, DiscoveryApiModel, Metric, ReportsApiModel, TimeDimensionsTypes } from '../types/discovery-api.model';\nimport { MyDataSourceOptions, MyQuery, TestDataSourceResponseStatus, VARIABLE_QUERY } from '../types/types';\n\nclass QueryVariableSupport extends DataSourceVariableSupport<DatasourceService, MyQuery> {\n  query: (request: DataQueryRequest<MyQuery>) => Observable<DataQueryResponse>;\n  editor = {};\n  id: number;\n\n  constructor({ query, id }: DataSourceWithBackend) {\n    super();\n    this.query = query;\n    this.id = id;\n  }\n  getDefaultQuery(): Partial<MyQuery> {\n    return {\n      reportLink: '',\n      dimensions: [],\n      metrics: [],\n      filters: [],\n      sortBys: []\n    };\n  }\n\n  getType(): VariableSupportType {\n    return VariableSupportType.Custom;\n  }\n}\n\nexport class DatasourceService extends DataSourceWithBackend<MyQuery, MyDataSourceOptions> {\n\n  private static readonly DISCOVERY = 'discovery';\n  private static readonly REPORTS = 'reports';\n  private static readonly DATA = 'data';\n  private static readonly MILLISECONDS_IN_SECOND = 1000;\n  private static readonly DISCOVERY_CACHE_RETURN_DELAY = 100;\n  private static readonly cachedDiscoveryAPIMap = new Map<string, DiscoveryApiModel>();\n\n  constructor(protected readonly instanceSettings: DataSourceInstanceSettings<MyDataSourceOptions>) {\n    super(instanceSettings);\n    this.variables = new QueryVariableSupport(this);\n  }\n\n  static discoveryApi(id: number, targetUrl: string): Observable<DiscoveryApiModel> {\n    if (DatasourceService.cachedDiscoveryAPIMap.has(targetUrl)) {\n      return of(DatasourceService.cachedDiscoveryAPIMap.get(targetUrl) as DiscoveryApiModel)\n        .pipe(\n          delay(DatasourceService.DISCOVERY_CACHE_RETURN_DELAY)\n        );\n    }\n\n    return DatasourceService.makeBackendSrvCall<DiscoveryApiModel>({\n      url: `${DatasourceService.getBackendDataSourceUrl(id)}/${DatasourceService.DISCOVERY}`,\n      params: {\n        targetUrl\n      }\n    }).pipe(\n      tap(data => DatasourceService.cachedDiscoveryAPIMap.set(targetUrl, data))\n    );\n  }\n\n  static reportsApi(id: number): Observable<ReportsApiModel> {\n    return DatasourceService.makeBackendSrvCall({\n      url: `${DatasourceService.getBackendDataSourceUrl(id)}/${DatasourceService.REPORTS}`\n    });\n  }\n\n  private static makeBackendSrvCall<T>(options: BackendSrvRequest): Observable<T> {\n    return getBackendSrv()\n      .fetch<T>(options)\n      .pipe(\n        map(({ data }) => data)\n      );\n  }\n\n  private static getBackendDataSourceUrl(id: number): string {\n    return `/api/datasources/${id}/resources`;\n  }\n\n  async testDatasource(): Promise<TestDataSourceResponse> {\n    const source$ = DatasourceService.reportsApi(this.id)\n      .pipe(\n        map(data => this.createTestDataSourceResponse(data ? TestDataSourceResponseStatus.Success : TestDataSourceResponseStatus.Error)),\n        catchError(() => of(this.createTestDataSourceResponse(TestDataSourceResponseStatus.Error)))\n      );\n\n    return await lastValueFrom(source$);\n  }\n\n  query(request: DataQueryRequest<MyQuery>): Observable<DataQueryResponse> {\n    const { scopedVars } = request;\n\n    const dataObservables = request.targets.map(target => {\n      const { dimensions, metrics, filters, sortBys, reportLink, refId } = target;\n      const { from, to } = request.range;\n      const body = {\n        ...omitBy({\n          dimensions,\n          metrics,\n          filters,\n          sortBys\n        }, isEmpty)\n      };\n      const interpolatedBody = !isEmpty(scopedVars) ? JSON.parse(getTemplateSrv().replace(JSON.stringify(body), scopedVars)) : body;\n\n      return forkJoin([\n        getBackendSrv()\n          .fetch<Record<string, any>>({\n            method: 'POST',\n            url: `${DatasourceService.getBackendDataSourceUrl(this.id)}/${DatasourceService.DATA}`,\n            data: {\n              body: interpolatedBody,\n              from: from.toISOString(),\n              to: to.toISOString()\n            },\n            params: {\n              targetUrl: reportLink\n            },\n            hideFromInspector: false\n          }),\n        DatasourceService.discoveryApi(this.id, reportLink || '')\n      ]).pipe(\n        map(([ { data: { data } }, discoveryApiModel ]) => ({\n          data: [ DatasourceService.convertToDataFrame(data, discoveryApiModel, refId, dimensions) ]\n        }))\n      );\n    });\n\n    return forkJoin([ ...dataObservables ])\n      .pipe(\n        map(data => ({ data: data.map(singleQuery => singleQuery.data).flat() }))\n      );\n  }\n\n  private static convertToDataFrame(data: Record<string, any>[], { dimensions, metrics }: DiscoveryApiModel, refId: string, selectedDimensions?: string[]) {\n    const fieldsData = [ ...dimensions, ...metrics ];\n\n    const frame = new MutableDataFrame({\n      fields: uniq(data?.map(row => Object.keys(row)).flat()).map(dataKey => {\n        const fieldData = fieldsData.find(({ name }) => name === dataKey);\n        const dataFrame = {\n          name: dataKey,\n          refId\n        };\n\n        return fieldData ? {\n          ...dataFrame,\n          type: DatasourceService.getFieldDataType(fieldData)\n        } : dataFrame;\n      })\n    });\n\n    if (refId === VARIABLE_QUERY) {\n      frame.fields.forEach(field => {\n        if (selectedDimensions?.includes(field.name) && field.type !== FieldType.time) {\n          field.type = FieldType.string;\n        }\n      });\n\n      const stringFields = frame.fields.filter(({ type }) => type === FieldType.string);\n      const firstStringDimension = selectedDimensions?.find(dimension => stringFields.find(({ name }) => name === dimension));\n      const variableField = stringFields.find(field => field.name === firstStringDimension);\n\n      if (variableField) {\n        frame.fields = frame.fields.filter(({ type }) => type !== FieldType.string);\n        frame.fields.push(variableField);\n      }\n    }\n\n    data?.forEach(row => frame.add(row));\n\n    const hasTimeField = frame.fields.find(field => field.type === FieldType.time);\n\n    if (hasTimeField) {\n      for (let i = 0; i < hasTimeField.values.length; i++) {\n        hasTimeField.values.set(i, hasTimeField.values.get(i) * DatasourceService.MILLISECONDS_IN_SECOND)\n      }\n    }\n\n    return frame;\n  };\n\n  private createTestDataSourceResponse(status: TestDataSourceResponseStatus): TestDataSourceResponse {\n    if (status === TestDataSourceResponseStatus.Error) {\n      return {\n        status: TestDataSourceResponseStatus.Error,\n        message: 'Data source test failed. Check credentials and try again.'\n      };\n    }\n\n    return {\n      status: TestDataSourceResponseStatus.Success,\n      message: 'Data source is working properly.'\n    };\n    \n  }\n\n  private static getFieldDataType({ type }: Dimension | Metric): FieldType {\n    if (TimeDimensionsTypes.includes(type)) {\n      return FieldType.time;\n    }\n\n    return type.toLowerCase() === FieldType.string ? FieldType.string : FieldType.number;\n  };\n}\n\n","import { CascaderOption } from '@grafana/ui';\nimport { groupBy } from 'lodash';\n\nimport { ReportsApiModel } from '../types/discovery-api.model';\nimport { API_URL } from '../types/types';\nimport { toCascaderOption } from '../utils/utils';\n\nexport class DatasourcesCascaderService {\n\n  static getDataSourceParts(url: string): string[] {\n    return url.replace(API_URL, '').split('/');\n  }\n\n  static getCascaderOptions(data: ReportsApiModel): CascaderOption[] {\n    const reportData = data.reports\n      .map(({ reportLink }) => reportLink)\n      .map(reportLink => ({ reportLink, items: DatasourcesCascaderService.getDataSourceParts(reportLink) }));\n    const groupedByDomain = groupBy(reportData, ({ items: [ domain ] }) => domain);\n    const groupedByFamily = Object.keys(groupedByDomain).map(key => ({\n      [ key ]: groupBy(groupedByDomain[ key ], ({ items: [ , family ] }) => family)\n    }));\n\n    return groupedByFamily.map(family => Object.keys(family)\n      .map(key => toCascaderOption({\n        value: key,\n        items: Object.keys(family[ key ])\n          .map(secondLevelKey => ({\n            value: secondLevelKey,\n            items: family[ key ][ secondLevelKey ]\n              .map(({ reportLink, items: [ , , report ] }) => ({\n                value: reportLink,\n                label: report\n              }))\n          })) as CascaderOption[]\n      })))\n      .flat();\n  };\n}\n\n","import { DataSourcePlugin } from '@grafana/data';\n\nimport { ConfigEditor } from './components/config-editor/ConfigEditor';\nimport { QueryEditor } from './components/query-editor/QueryEditor';\nimport { DatasourceService } from './services/datasource.service';\nimport { MyDataSourceOptions, MyQuery } from './types/types';\n\nexport const plugin = new DataSourcePlugin<DatasourceService, MyQuery, MyDataSourceOptions>(DatasourceService)\n  .setConfigEditor(ConfigEditor)\n  .setQueryEditor(QueryEditor);\n","import { Field, InlineField, Input, TextArea } from '@grafana/ui';\nimport { camelCase, isEmpty } from 'lodash';\nimport React, { ChangeEvent, useState } from 'react';\n\nimport { inputWidth, labelWidth, Secret, secretsNames } from './types';\nimport { DataSourceProps, MyDataSourceOptions } from '../../types/types';\nimport './ConfigEditor.css';\n\nexport function ConfigEditor({ options, onOptionsChange }: DataSourceProps) {\n  const secureJsonData = options.secureJsonData || {};\n\n  const [ credentialsTextAreaInvalid, setCredentialsTextAreaInvalid ] = useState<boolean>(false);\n  const onInputChange = ({ target: { value } }: ChangeEvent<HTMLInputElement>, fieldName: string) => {\n    const updatedSecureJsonData = {\n      ...secureJsonData,\n      [ fieldName ]: value\n    };\n    onOptionsChange({ ...options, secureJsonData: updatedSecureJsonData });\n  };\n\n  const onClientSecretChange = (event: ChangeEvent<HTMLInputElement>) => onInputChange(event, Secret.ClientSecret);\n  const onHostChange = (event: ChangeEvent<HTMLInputElement>) => onInputChange(event, Secret.Host);\n  const onAccessTokenChange = (event: ChangeEvent<HTMLInputElement>) => onInputChange(event, Secret.AccessToken);\n  const onClientTokenChange = (event: ChangeEvent<HTMLInputElement>) => onInputChange(event, Secret.ClientToken);\n  const onCredentialsTextAreaChange = ({ target: { value } }: ChangeEvent<HTMLTextAreaElement>) => {\n    const secrets = value\n      .split('\\n')\n      .map(line => line.trim().split(/\\s=\\s(.*)/s))\n      .map(([ name, secret ]) => ({ [ camelCase(name) ]: secret }))\n      .reduce((prev, next) => ({ ...prev, ...next }), {});\n\n    const entries = Object.entries(secrets);\n    const isCredentialsTextAreaInvalid = entries.length !== secretsNames.length || entries\n      .some(([ name, secret ]) => !secretsNames.includes(name as Secret) || isEmpty(secret));\n    setCredentialsTextAreaInvalid(isCredentialsTextAreaInvalid);\n\n    if (!isCredentialsTextAreaInvalid) {\n      const updatedSecureJsonData = {\n        ...secureJsonData,\n        ...secrets\n      };\n\n      onOptionsChange({ ...options, secureJsonData: updatedSecureJsonData });\n    }\n  };\n\n  const { clientSecret, host, clientToken, accessToken } = secureJsonData as MyDataSourceOptions;\n\n  return (\n    <div className=\"gf-form-group\">\n      <div className=\"credentials__container\">\n        <Field label=\"Information\" description=\"Paste credentials here to auto fill form below\">\n          <TextArea\n            className=\"credentials__textarea\"\n            name=\"credentialsTextArea\"\n            invalid={credentialsTextAreaInvalid}\n            onChange={onCredentialsTextAreaChange}/>\n        </Field>\n      </div>\n      <hr/>\n      <InlineField\n        label=\"Akamai Client Secret\"\n        labelWidth={labelWidth}>\n        <Input\n          onChange={onClientSecretChange}\n          value={clientSecret || ''}\n          placeholder=\"Enter client secret\"\n          width={inputWidth}\n        />\n      </InlineField>\n      <InlineField\n        label=\"Host\"\n        labelWidth={labelWidth}>\n        <Input\n          value={host || ''}\n          placeholder=\"Enter host\"\n          width={inputWidth}\n          onChange={onHostChange}\n        />\n      </InlineField>\n      <InlineField\n        label=\"Access Token\"\n        labelWidth={labelWidth}>\n        <Input\n          value={accessToken || ''}\n          placeholder=\"Enter access token\"\n          width={inputWidth}\n          onChange={onAccessTokenChange}\n        />\n      </InlineField>\n      <InlineField\n        label=\"Client Token\"\n        labelWidth={labelWidth}>\n        <Input\n          value={clientToken || ''}\n          placeholder=\"Enter client token\"\n          width={inputWidth}\n          onChange={onClientTokenChange}\n        />\n      </InlineField>\n    </div>\n  );\n}\n","import { QueryEditorProps } from '@grafana/data';\nimport { Cascader, CascaderOption, Icon } from '@grafana/ui';\nimport { isEmpty } from 'lodash';\nimport React, { useLayoutEffect, useState } from 'react';\n\nimport { DataSourceForm } from './DataSourceForm/DataSourceForm';\nimport { DatasourceService } from '../../services/datasource.service';\nimport { DatasourcesCascaderService } from '../../services/datasources-cascader.service';\nimport { initialModel } from '../../types/discovery-api.model';\nimport { MyDataSourceOptions, MyQuery } from '../../types/types';\n\ntype Props = QueryEditorProps<DatasourceService, MyQuery, MyDataSourceOptions>;\n\nexport function QueryEditor({ query, onChange, onRunQuery, datasource }: Props) {\n  const cascaderSeparator = ' > ';\n  const [ model, setState ] = useState(initialModel);\n  const [ dataSource, setDataSource ] = useState<string>('');\n  const [ isDataSourceLoading, setIsDataSourceLoading ] = useState(false);\n  const [ isReportListLoading, setIsReportListLoading ] = useState(true);\n  const [ cascaderOptions, setCascaderOptions ] = useState([] as CascaderOption[]);\n\n  const onDataSourceOptionChange = (value: string) => {\n    query.reportLink = value;\n    setDataSource(value || '');\n\n    if (value) {\n      setIsDataSourceLoading(true);\n      DatasourceService.discoveryApi(datasource.id, value).subscribe({\n        next: data => setState(data),\n        complete: () => setIsDataSourceLoading(false)\n      });\n    }\n  };\n\n  useLayoutEffect(() => {\n    const subscription = DatasourceService.reportsApi(datasource.id).subscribe({\n      next: data => {\n        setCascaderOptions(DatasourcesCascaderService.getCascaderOptions(data));\n        onDataSourceOptionChange(query.reportLink || '');\n        setIsReportListLoading(false);\n      },\n      error: () => {\n        setCascaderOptions([]);\n        setIsReportListLoading(false);\n      }\n    });\n\n    return () => subscription.unsubscribe();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ datasource.id ]);\n\n  return (\n    <>\n      {(() => !isReportListLoading ?\n        <Cascader\n          initialValue={dataSource ? DatasourcesCascaderService.getDataSourceParts(dataSource).join(cascaderSeparator) : ''}\n          placeholder=\"Select report data source\"\n          allowCustomValue={true}\n          options={cascaderOptions}\n          changeOnSelect={false}\n          onSelect={onDataSourceOptionChange}\n          displayAllSelectedLevels={true}\n          separator={cascaderSeparator}\n        />\n        : <><Icon name=\"fa fa-spinner\"/> Fetching...</>\n      )()}\n      <hr/>\n      {(() => !isDataSourceLoading && !isEmpty(model.metrics) && !isEmpty(model.dimensions) ?\n        <DataSourceForm\n          model={model}\n          query={query}\n          onChange={onChange}\n          onRunQuery={onRunQuery}\n          datasource={datasource}\n        /> :\n        isDataSourceLoading ? <><Icon name=\"fa fa-spinner\"/> Fetching...</> : ''\n      )()}\n    </>\n  );\n}\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__WEBPACK_EXTERNAL_MODULE__89__","__WEBPACK_EXTERNAL_MODULE__781__","__WEBPACK_EXTERNAL_MODULE__531__","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__241__","__WEBPACK_EXTERNAL_MODULE__959__","__WEBPACK_EXTERNAL_MODULE__269__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","nc","Secret","secretsNames","locals","identityFn","toSelectableValues","values","name","stringToSelectableValue","stringsToSelectableValues","labelMapFn","label","enumToSelectableValues","input","prettyEnum","s","replace","toLowerCase","charAt","toUpperCase","slice","toCascaderOption","items","shortLabelWidth","FilterType","filterTypeOptions","filterTypeOptionsMap","groupBy","DimensionOperator","FilterValueType","dimensionOperatorOptions","authorizableOrEnumFiltersOperatorOptions","metricOperatorOptions","MetricOperator","sortByOrderOptions","SortByOrder","FilterEditor","model","names","operators","multiExpressions","onChange","ExpressionField","InlineField","TagsInput","placeholder","width","tags","expressions","uniq","val","split","flat","filter","isEmpty","Input","first","event","Fragment","Select","isClearable","operator","FormService","creteEmptyFilter","defaultDimension","type","query","creteEmptySortBy","sortOrder","toValues","toFilterFormModels","filterQueries","dimensions","metrics","filterName","dimensionName","metricName","filterType","guessFilterType","expression","isUndefined","exp","toSortBysFormModel","metric","includes","Dimension","Metric","toFilterQueries","rows","set","toExpressions","toExpression","potentialNumber","Number","isNaN","toSortByQueries","getDimensionsOperatorsOptions","discoveryApiModel","find","Enum","authorizable","getIntersectedModelOptions","queryOptions","modelOptions","queryVariables","VARIABLE_REGEX","test","intersection","FilterEditorRow","Editor","span","getFilterEditor","InlineFieldRow","className","updatedModel","_extends","assign","bind","arguments","t","unitlessKeys","animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","fontWeight","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","WebkitLineClamp","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","memoize","fn","cache","create","arg","hyphenateRegex","animationRegex","isCustomProperty","property","charCodeAt","isProcessableValue","processStyleName","styleName","processStyleValue","match","p1","p2","cursor","styles","next","handleInterpolation","mergedProps","registered","interpolation","componentSelector","__emotion_styles","keyframes","anim","serializedStyles","string","Array","isArray","asString","interpolated","createStringFromObject","previousCursor","cached","labelPattern","useInsertionEffect","useInsertionEffectAlwaysWithSyncFallback","registerStyles","serialized","isStringTag","reactPropsRegex","testOmitPropsOnStringTag","testOmitPropsOnComponent","getDefaultShouldForwardProp","tag","composeShouldForwardProps","isReal","shouldForwardProp","optionsShouldForwardProp","__emotion_forwardProp","propName","Insertion","_ref","inserted","current","sheet","insertStyles","styled","createStyled","identifierName","targetClassName","__emotion_real","baseTag","__emotion_base","defaultShouldForwardProp","shouldUseAs","args","raw","templateStringsArr","len","Styled","withEmotionCache","props","ref","registeredStyles","classNames","rawClassName","FinalTag","as","classInterpolations","theme","ThemeContext","forEach","stringMode","strings","lastIndex","exec","str","h","serializeStyles","finalShouldForwardProp","newProps","_key","displayName","defaultProps","withComponent","nextTag","nextOptions","tagName","ListIconsRow","div","ListField","fieldLabel","fieldTooltip","resource","modelProvider","tooltip","labelWidth","IconButton","onClick","updated","onChangeSingle","listCopy","onRemove","SortByEditor","SortByEditorRow","getSortByEditor","DataSourceForm","onRunQuery","defaults","defaultMetrics","defaultDimensions","defaultSortBys","dimensionsOptions","defaultDimensionsOptions","metricsOptions","defaultMetricsOptions","dimensionsValues","metricsValues","defaultSortBysOptions","setDimensions","useState","isNil","setMetrics","filters","setFilters","sortBys","setSortBys","applyDisabled","setApplyDisabled","defaultValuesInfoVisible","setDefaultValuesInfoVisible","onFormChange","selectedDimensions","selectedMetrics","Alert","title","severity","VerticalGroup","MultiSelect","allowCustomValue","filterModel","onSingleFilterChange","updatedFilterModel","sortByModel","onSingleSortByChange","updatedSortByModel","Button","fill","variant","disabled","updatedQuery","initialModel","refId","TimeDimensionsTypes","TestDataSourceResponseStatus","QueryVariableSupport","DataSourceVariableSupport","getDefaultQuery","reportLink","getType","VariableSupportType","Custom","constructor","super","editor","DatasourceService","DataSourceWithBackend","discoveryApi","targetUrl","cachedDiscoveryAPIMap","has","of","pipe","delay","DISCOVERY_CACHE_RETURN_DELAY","makeBackendSrvCall","url","getBackendDataSourceUrl","DISCOVERY","params","tap","reportsApi","REPORTS","getBackendSrv","fetch","testDatasource","source$","createTestDataSourceResponse","Success","catchError","lastValueFrom","request","scopedVars","dataObservables","targets","from","to","range","body","omitBy","interpolatedBody","parse","getTemplateSrv","forkJoin","method","DATA","toISOString","hideFromInspector","convertToDataFrame","singleQuery","fieldsData","frame","MutableDataFrame","fields","row","keys","dataKey","fieldData","dataFrame","getFieldDataType","field","FieldType","time","stringFields","firstStringDimension","dimension","variableField","add","hasTimeField","MILLISECONDS_IN_SECOND","status","message","number","instanceSettings","variables","Map","DatasourcesCascaderService","getDataSourceParts","getCascaderOptions","reportData","reports","groupedByDomain","domain","groupedByFamily","family","secondLevelKey","report","plugin","DataSourcePlugin","setConfigEditor","onOptionsChange","secureJsonData","credentialsTextAreaInvalid","setCredentialsTextAreaInvalid","onInputChange","fieldName","updatedSecureJsonData","clientSecret","host","clientToken","accessToken","Field","description","TextArea","invalid","secrets","line","trim","secret","camelCase","reduce","prev","entries","isCredentialsTextAreaInvalid","some","hr","ClientSecret","Host","AccessToken","ClientToken","setQueryEditor","datasource","setState","dataSource","setDataSource","isDataSourceLoading","setIsDataSourceLoading","isReportListLoading","setIsReportListLoading","cascaderOptions","setCascaderOptions","onDataSourceOptionChange","subscribe","complete","useLayoutEffect","subscription","error","unsubscribe","Icon","Cascader","initialValue","changeOnSelect","onSelect","displayAllSelectedLevels","separator"],"sourceRoot":""}