define(["@grafana/data","@grafana/ui","lodash","react","@emotion/react","@grafana/runtime","rxjs"],(e,t,r,n,o,i,a)=>(()=>{"use strict";var s={429(e,t,r){r.d(t,{A:()=>s});var n=r(942),o=r.n(n),i=r(278),a=r.n(i)()(o());a.push([e.id,".credentials__container {\n  height: 200px;\n  width: 640px;\n}\n\n.credentials__textarea {\n  height: 150px;\n}\n","",{version:3,sources:["webpack://./components/config-editor/ConfigEditor.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,YAAY;AACd;;AAEA;EACE,aAAa;AACf",sourcesContent:[".credentials__container {\n  height: 200px;\n  width: 640px;\n}\n\n.credentials__textarea {\n  height: 150px;\n}\n"],sourceRoot:""}]);const s=a},587(e,t,r){r.d(t,{A:()=>s});var n=r(942),o=r.n(n),i=r(278),a=r.n(i)()(o());a.push([e.id,".padding-left-20 {\n    padding-left: 20px;\n}\n","",{version:3,sources:["webpack://./styles/styles.css"],names:[],mappings:"AAAA;IACI,kBAAkB;AACtB",sourcesContent:[".padding-left-20 {\n    padding-left: 20px;\n}\n"],sourceRoot:""}]);const s=a},278(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r}).join("")},t.i=function(e,r,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);n&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},942(e){e.exports=function(e){var t=e[1],r=e[3];if(!r)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),i="/*# ".concat(o," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},292(e){var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},a=[],s=0;s<e.length;s++){var l=e[s],c=n.base?l[0]+n.base:l[0],u=i[c]||0,p="".concat(c," ").concat(u);i[c]=u+1;var d=r(p),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(m);else{var f=o(m,n);n.byIndex=s,t.splice(s,0,{identifier:p,updater:f,references:1})}a.push(p)}return a}function o(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var i=n(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=r(i[a]);t[s].references--}for(var l=n(e,o),c=0;c<i.length;c++){var u=r(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},383(e){var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},88(e){e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},884(e,t,r){e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},893(e){e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},997(e){e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},89(e){e.exports=o},781(t){t.exports=e},531(e){e.exports=i},7(e){e.exports=t},241(e){e.exports=r},959(e){e.exports=n},269(e){e.exports=a}},l={};function c(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={id:e,exports:{}};return s[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nc=void 0;var u={};c.r(u),c.d(u,{plugin:()=>it});var p=c(781),d=c(7),m=c(241),f=c(959),y=c.n(f),g=function(e){return e.ClientSecret="clientSecret",e.Host="host",e.AccessToken="accessToken",e.ClientToken="clientToken",e}({});const h=["clientSecret","host","accessToken","clientToken"];var v=c(292),b=c.n(v),O=c(893),E=c.n(O),S=c(383),w=c.n(S),C=c(884),k=c.n(C),x=c(88),A=c.n(x),P=c(997),j=c.n(P),T=c(429),I={};function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){D(e,t,r[t])})}return e}function F(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}I.styleTagTransform=j(),I.setAttributes=k(),I.insert=w().bind(null,"head"),I.domAPI=E(),I.insertStyleElement=A(),b()(T.A,I),T.A&&T.A.locals&&T.A.locals;var N=c(587),M={};M.styleTagTransform=j(),M.setAttributes=k(),M.insert=w().bind(null,"head"),M.domAPI=E(),M.insertStyleElement=A(),b()(N.A,M),N.A&&N.A.locals&&N.A.locals;const R=e=>e,B=e=>e.map(({name:e})=>q(e)),L=(e=[],t=R)=>e.map(e=>q(e,t)),q=(e,t=R)=>({label:t(e),value:e}),H=e=>L([...Object.values(e)],U),U=e=>{const t=e.replace(/_/g," ").toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},V=({value:e="",label:t,items:r=[]})=>({value:e,label:null!=t?t:e,items:null==r?void 0:r.map(V)}),W=25;var G=function(e){return e.Dimension="Dimension",e.Metric="Metric",e}({});const z=H(G),$=(0,m.groupBy)(z,"value");var X=function(e){return e.InList="IN_LIST",e.NotInList="NOT_IN_LIST",e.MatchRegExp="MATCH_REGEXP",e.NotMatchRegExp="NOT_MATCH_REGEXP",e.BeginsWith="BEGINS_WITH",e.NotBeginsWith="NOT_BEGINS_WITH",e.EndsWith="ENDS_WITH",e.NotEndsWith="NOT_ENDS_WITH",e.Contains="CONTAINS",e.NotContains="NOT_CONTAINS",e.Exact="EXACT",e}({}),Y=function(e){return e.Text="TEXT",e.Enum="ENUM",e}({});const Q=H(X),J=L(["IN_LIST","NOT_IN_LIST"],U),K=H(function(e){return e.Equal="EQUAL",e.NotEqual="NOT_EQUAL",e.LessThan="LESS_THAN",e.GreaterThan="GREATER_THAN",e}({})),Z=H(function(e){return e.Ascending="ASCENDING",e.Descending="DESCENDING",e}({}));function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ee(e,t,r[t])})}return e}function re(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ne({model:e,names:t,operators:r,multiExpressions:n,onChange:o}){const i=n?y().createElement(d.InlineField,null,y().createElement(d.TagsInput,{placeholder:"Expressions",width:50,tags:e.expressions,onChange:t=>{return o(re(te({},e),{expressions:(r=t,(0,m.uniq)(r.map(e=>e.split(",")).flat().filter(e=>!(0,m.isEmpty)(e))))}));var r}})):y().createElement(d.InlineField,null,y().createElement(d.Input,{placeholder:"Expression",width:50,value:(0,m.first)(e.expressions),onChange:t=>o(re(te({},e),{expressions:[t.target.value]}))}));return y().createElement(f.Fragment,null,y().createElement(d.InlineField,null,y().createElement(d.Select,{placeholder:"Name",isClearable:!1,options:t,width:W,value:e.name,onChange:t=>o(re(te({},e),{name:t}))})),y().createElement(d.InlineField,null,y().createElement(d.Select,{placeholder:"Operator",isClearable:!1,width:W,options:r,value:e.operator,onChange:t=>o(re(te({},e),{operator:t}))})),i)}class oe{static creteEmptyFilter(e){return{type:z[0],query:{name:e,operator:Q[0],expressions:[]}}}static creteEmptySortBy(e){return{type:z[0],query:{name:e,sortOrder:Z[0]}}}static toValues(e){return e.map(({value:e})=>e).filter(e=>e)}static toFilterFormModels(e=[],t,r){return null==e?void 0:e.map(e=>{var n;const o=e.dimensionName||e.metricName,i=oe.guessFilterType(o,t,r);return i?{type:$[i][0],query:{name:o?q(o):void 0,operator:e.operator?q(e.operator,U):void 0,expressions:((null===(n=e.expressions)||void 0===n?void 0:n.length)?e.expressions:[e.expression]).filter(e=>!(0,m.isUndefined)(e)).map(e=>`${e}`)}}:{}}).filter(e=>!(0,m.isEmpty)(e))}static toSortBysFormModel(e=[],t,r){return null==e?void 0:e.map(e=>{const n=oe.guessFilterType(e.name,t,r);return n?{type:$[n][0],query:{name:e.name?q(e.name):void 0,sortOrder:e.sortOrder?q(e.sortOrder,U):void 0}}:{}}).filter(e=>!(0,m.isEmpty)(e))}static guessFilterType(e,t,r){if(!(0,m.isUndefined)(e))return t.includes(e)?G.Dimension:r.includes(e)?G.Metric:void 0}static toFilterQueries(e){return e.map(({type:e,query:{name:t,operator:r,expressions:n}})=>{const o={operator:null==r?void 0:r.value};return e.value===G.Dimension?((0,m.set)(o,"dimensionName",null==t?void 0:t.value),(0,m.set)(o,"expressions",oe.toExpressions(n))):e.value===G.Metric&&((0,m.set)(o,"metricName",null==t?void 0:t.value),(0,m.set)(o,"expression",oe.toExpression((0,m.first)(n)))),o})}static toExpressions(e=[]){return e.map(e=>oe.toExpression(e))}static toExpression(e=""){let t=Number(e);return isNaN(t)?e:t}static toSortByQueries(e){return e.map(({query:{name:e,sortOrder:t}})=>({name:null==e?void 0:e.value,sortOrder:null==t?void 0:t.value}))}static getDimensionsOperatorsOptions({query:{name:e}},t){const r=t.dimensions.find(t=>t.name===(null==e?void 0:e.value));return(null==r?void 0:r.filterType)===Y.Enum||(null==r?void 0:r.authorizable)?J:Q}static getIntersectedModelOptions(e,t){const r=e.filter(e=>oe.VARIABLE_REGEX.test(e));return[...(0,m.intersection)(e,t.map(({name:e})=>e)),...r||[]]}}var ie,ae,se;function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){le(e,t,r[t])})}return e}function ue(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function pe({model:e,discoveryApiModel:t,dimensions:r,metrics:n,onChange:o}){var i;const a=function(e,t,r,n,o,i){switch(e){case G.Dimension:return y().createElement(ne,{model:n.query,names:t,operators:oe.getDimensionsOperatorsOptions(n,o),multiExpressions:!0,onChange:e=>i(ue(ce({},n),{query:e}))});case G.Metric:return y().createElement(ne,{model:n.query,names:r,operators:K,multiExpressions:!1,onChange:e=>i(ue(ce({},n),{query:e}))});default:return y().createElement(d.InlineField,null,y().createElement("span",null,"Not implemented yet"))}}(null===(i=e.type)||void 0===i?void 0:i.value,r,n,e,t,o);return y().createElement(d.InlineFieldRow,{className:"padding-left-20"},y().createElement(d.InlineField,null,y().createElement(d.Select,{isClearable:!1,width:W,options:z,value:e.type,onChange:e=>{let t={};e.value===G.Dimension?t=oe.creteEmptyFilter(r[0]):e.value===G.Metric&&(t=oe.creteEmptyFilter(n[0])),o(ue(ce({},t),{type:e}))}})),a)}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},de.apply(null,arguments)}se=/\${.+}/gm,(ae="VARIABLE_REGEX")in(ie=oe)?Object.defineProperty(ie,ae,{value:se,enumerable:!0,configurable:!0,writable:!0}):ie[ae]=se;var me=c(89),fe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function ye(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var ge=/[A-Z]|^ms/g,he=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ve=function(e){return 45===e.charCodeAt(1)},be=function(e){return null!=e&&"boolean"!=typeof e},Oe=ye(function(e){return ve(e)?e:e.replace(ge,"-$&").toLowerCase()}),Ee=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(he,function(e,t,r){return we={name:t,styles:r,next:we},t})}return 1===fe[e]||ve(e)||"number"!=typeof t||0===t?t:t+"px"};function Se(e,t,r){if(null==r)return"";var n=r;if(void 0!==n.__emotion_styles)return n;switch(typeof r){case"boolean":return"";case"object":var o=r;if(1===o.anim)return we={name:o.name,styles:o.styles,next:we},o.name;var i=r;if(void 0!==i.styles){var a=i.next;if(void 0!==a)for(;void 0!==a;)we={name:a.name,styles:a.styles,next:we},a=a.next;return i.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=Se(e,t,r[o])+";";else for(var i in r){var a=r[i];if("object"!=typeof a){var s=a;null!=t&&void 0!==t[s]?n+=i+"{"+t[s]+"}":be(s)&&(n+=Oe(i)+":"+Ee(i,s)+";")}else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=Se(e,t,a);switch(i){case"animation":case"animationName":n+=Oe(i)+":"+l+";";break;default:n+=i+"{"+l+"}"}}else for(var c=0;c<a.length;c++)be(a[c])&&(n+=Oe(i)+":"+Ee(i,a[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var s=we,l=r(e);return we=s,Se(e,t,l)}}var c=r;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var we,Ce=/label:\s*([^\s;{]+)\s*(;|$)/g,ke=!!f.useInsertionEffect&&f.useInsertionEffect,xe=ke||function(e){return e()};ke||f.useLayoutEffect;var Ae=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},Pe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,je=ye(function(e){return Pe.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}),Te=function(e){return"theme"!==e},Ie=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?je:Te},De=function(e,t,r){var n;if(t){var o=t.shouldForwardProp;n=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof n&&r&&(n=e.__emotion_forwardProp),n},_e=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return Ae(t,r,n),xe(function(){return function(e,t,r){Ae(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+n:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}(t,r,n)}),null},Fe=function e(t,r){var n,o,i=t.__emotion_real===t,a=i&&t.__emotion_base||t;void 0!==r&&(n=r.label,o=r.target);var s=De(t,r,i),l=s||Ie(a),c=!l("as");return function(){var u=arguments,p=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&p.push("label:"+n+";"),null==u[0]||void 0===u[0].raw)p.push.apply(p,u);else{var d=u[0];p.push(d[0]);for(var m=u.length,y=1;y<m;y++)p.push(u[y],d[y])}var g=(0,me.withEmotionCache)(function(e,t,r){var n,i,u,d,m=c&&e.as||a,y="",g=[],h=e;if(null==e.theme){for(var v in h={},e)h[v]=e[v];h.theme=f.useContext(me.ThemeContext)}"string"==typeof e.className?(n=t.registered,i=g,u=e.className,d="",u.split(" ").forEach(function(e){void 0!==n[e]?i.push(n[e]+";"):e&&(d+=e+" ")}),y=d):null!=e.className&&(y=e.className+" ");var b=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,o="";we=void 0;var i=e[0];null==i||void 0===i.raw?(n=!1,o+=Se(r,t,i)):o+=i[0];for(var a=1;a<e.length;a++)o+=Se(r,t,e[a]),n&&(o+=i[a]);Ce.lastIndex=0;for(var s,l="";null!==(s=Ce.exec(o));)l+="-"+s[1];var c=function(e){for(var t,r=0,n=0,o=e.length;o>=4;++n,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(o){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:we}}(p.concat(g),t.registered,h);y+=t.key+"-"+b.name,void 0!==o&&(y+=" "+o);var O=c&&void 0===s?Ie(m):l,E={};for(var S in e)c&&"as"===S||O(S)&&(E[S]=e[S]);return E.className=y,r&&(E.ref=r),f.createElement(f.Fragment,null,f.createElement(_e,{cache:t,serialized:b,isStringTag:"string"==typeof m}),f.createElement(m,E))});return g.displayName=void 0!==n?n:"Styled("+("string"==typeof a?a:a.displayName||a.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=a,g.__emotion_styles=p,g.__emotion_forwardProp=s,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(t,n){return e(t,de({},r,n,{shouldForwardProp:De(g,n,!0)})).apply(void 0,p)},g}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){Fe[e]=Fe(e)});const Ne=Fe.div`
    display: flex;
    align-items: center;
    height: 32px;
`;function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Re({fieldLabel:e,fieldTooltip:t,resource:r,rows:n,modelProvider:o,onChange:i,Editor:a}){return y().createElement(f.Fragment,null,y().createElement(d.InlineFieldRow,null,y().createElement(d.InlineField,{label:e,tooltip:t,labelWidth:W},y().createElement(Ne,null,(null==n?void 0:n.length)?y().createElement(d.IconButton,{name:"trash-alt",tooltip:"Remove all",onClick:()=>i([])}):"",y().createElement(d.IconButton,{name:"plus-circle",tooltip:`Add new ${r}`,onClick:()=>i([...n,o()])})))),n.map((e,t)=>y().createElement(d.InlineFieldRow,{key:t},a(e,t,e=>((e,t)=>{i(n.map((r,n)=>n===t?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Me(e,t,r[t])})}return e}({},r,e):r))})(e,t)),y().createElement(d.InlineField,null,y().createElement(Ne,null,y().createElement(d.IconButton,{name:"minus-circle",tooltip:`Remove ${r}`,onClick:()=>(e=>{const t=[...n];t.splice(e,1),i(t)})(t)}))))))}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Be(e,t,r[t])})}return e}function qe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function He({model:e,names:t,onChange:r}){return y().createElement(f.Fragment,null,y().createElement(d.InlineField,null,y().createElement(d.Select,{placeholder:"Name",isClearable:!1,width:W,options:t,value:e.name,onChange:t=>r(qe(Le({},e),{name:t}))})),y().createElement(d.InlineField,null,y().createElement(d.Select,{placeholder:"Sort order",isClearable:!1,width:W,options:Z,value:e.sortOrder,onChange:t=>r(qe(Le({},e),{sortOrder:t}))})))}function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ue(e,t,r[t])})}return e}function We(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Ge({model:e,dimensions:t,metrics:r,onChange:n}){var o;const i=function(e,t,r,n,o){switch(e){case G.Dimension:return y().createElement(He,{model:n.query,names:t,onChange:e=>o(We(Ve({},n),{query:e}))});case G.Metric:return y().createElement(He,{model:n.query,names:r,onChange:e=>o(We(Ve({},n),{query:e}))});default:return y().createElement(d.InlineField,null,y().createElement("span",null,"Not implemented yet"))}}(null===(o=e.type)||void 0===o?void 0:o.value,t,r,e,n);return y().createElement(d.InlineFieldRow,{className:"padding-left-20"},y().createElement(d.InlineField,null,y().createElement(d.Select,{isClearable:!1,width:W,options:z,value:e.type,onChange:e=>{let o={};e.value===G.Dimension?o=oe.creteEmptySortBy(t[0]):e.value===G.Metric&&(o=oe.creteEmptySortBy(r[0])),n(We(Ve({},o),{type:e}))}})),i)}function ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $e({query:e,onChange:t,onRunQuery:r,model:n}){const{defaults:{defaultMetrics:o=[],defaultDimensions:i=[],defaultSortBys:a=[]}}=n,s=B(n.dimensions),l=i?L(i):[],c=B(n.metrics),u=o?L(o):[],p=oe.toValues(s),g=oe.toValues(c),h=a?oe.toSortBysFormModel(a,p,g):[],[v,b]=(0,f.useState)(n.dimensions?(0,m.isNil)(e.dimensions)?l:L(oe.getIntersectedModelOptions(e.dimensions,n.dimensions)):[]),[O,E]=(0,f.useState)(n.metrics?(0,m.isNil)(e.metrics)?u:L(oe.getIntersectedModelOptions(e.metrics,n.metrics)):[]),[S,w]=(0,f.useState)(n.metrics||n.dimensions?oe.toFilterFormModels(e.filters,p,g):[]),[C,k]=(0,f.useState)(n.metrics&&n.dimensions?(0,m.isNil)(e.sortBys)?h:oe.toSortBysFormModel(e.sortBys,p,g):[]),[x,A]=(0,f.useState)((0,m.isEmpty)(v)&&(0,m.isEmpty)(O)),[P,j]=(0,f.useState)(!e.dimensions&&!e.metrics),T=(e,t)=>{A((0,m.isEmpty)(e)&&(0,m.isEmpty)(t)),j(!1)};return y().createElement("div",null,P&&y().createElement(d.Alert,{title:"Default values",severity:"info"},y().createElement(d.VerticalGroup,null,"Default values have been set for the form since the panel was opened for the first time or data for query was not saved.")),y().createElement(d.InlineField,{label:"Dimensions",labelWidth:W,tooltip:"Array of dimensions for grouping results (i.e.['time5minutes', 'cpcode']). Maximum number of dimensions: 4."},y().createElement(d.MultiSelect,{isClearable:!0,width:50,options:s,value:v,allowCustomValue:!0,onChange:e=>{b(e),T(e,O)}})),y().createElement(d.InlineField,{label:"Metrics",labelWidth:W,tooltip:"Array of metrics requested (i.e.: ['edgeBytesSum', 'originHitsSum'])."},y().createElement(d.MultiSelect,{isClearable:!0,width:50,options:c,value:O,allowCustomValue:!0,onChange:e=>{E(e),T(v,e)}})),y().createElement(Re,{fieldLabel:"Filters",fieldTooltip:"Filters used to narrow down the results of the data. Filters are specified in terms of dimensions or metrics.",resource:"Filter",rows:S,onChange:e=>{w(e),T(v,O)},modelProvider:()=>oe.creteEmptyFilter(s[0]),Editor:(e,t,r)=>y().createElement(pe,{key:t,model:e,dimensions:s,metrics:c,discoveryApiModel:n,onChange:e=>r(e,t)})}),y().createElement(Re,{fieldLabel:"Sort Bys",fieldTooltip:"Set sortBy settings for multiple columns. If not specified, the default values are used.",resource:"Sort By",rows:C,onChange:e=>{k(e),T(v,O)},modelProvider:()=>oe.creteEmptySortBy(v[0]),Editor:(e,t,r)=>y().createElement(Ge,{key:t,model:e,dimensions:v,metrics:O,onChange:e=>r(e,t)})}),y().createElement(d.InlineFieldRow,null,y().createElement(d.InlineField,null,y().createElement(d.Button,{fill:"outline",type:"reset",variant:"destructive",onClick:()=>{b([]),E([]),w([]),k([]),T([],[])}},"Clear")),y().createElement(d.InlineField,{disabled:x},y().createElement(d.Button,{type:"submit",variant:"primary",onClick:()=>{const n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ze(e,t,r[t])})}return e}({},e);n.dimensions=oe.toValues(v),n.metrics=oe.toValues(O),n.filters=oe.toFilterQueries(S),n.sortBys=oe.toSortByQueries(C),t(n),r(),j(!1)}},"Apply")),y().createElement(d.InlineField,null,y().createElement(d.Button,{type:"reset",variant:"secondary",onClick:()=>{E(u),b(l),k(h),T(l,u)}},"Restore defaults"))))}var Xe=c(531),Ye=c(269);const Qe={metrics:[],dimensions:[],defaults:{},refId:""},Je=["TIMESTAMP_SEC","DATE_ISO8601","TIMESTAMP_MS"];var Ke=function(e){return e.Success="success",e.Error="error",e}({});function Ze(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){et(e,t,r[t])})}return e}class rt extends p.DataSourceVariableSupport{getDefaultQuery(){return{reportLink:"",dimensions:[],metrics:[],filters:[],sortBys:[]}}getType(){return p.VariableSupportType.Custom}constructor({query:e,id:t}){super(),et(this,"query",void 0),et(this,"editor",{}),et(this,"id",void 0),this.query=e,this.id=t}}class nt extends Xe.DataSourceWithBackend{static discoveryApi(e,t){return nt.cachedDiscoveryAPIMap.has(t)?(0,Ye.of)(nt.cachedDiscoveryAPIMap.get(t)).pipe((0,Ye.delay)(nt.DISCOVERY_CACHE_RETURN_DELAY)):nt.makeBackendSrvCall({url:`${nt.getBackendDataSourceUrl(e)}/${nt.DISCOVERY}`,params:{targetUrl:t}}).pipe((0,Ye.tap)(e=>nt.cachedDiscoveryAPIMap.set(t,e)))}static reportsApi(e){return nt.makeBackendSrvCall({url:`${nt.getBackendDataSourceUrl(e)}/${nt.REPORTS}`})}static makeBackendSrvCall(e){return(0,Xe.getBackendSrv)().fetch(e).pipe((0,Ye.map)(({data:e})=>e))}static getBackendDataSourceUrl(e){return`/api/datasources/${e}/resources`}testDatasource(){return(e=function*(){const e=nt.reportsApi(this.id).pipe((0,Ye.map)(e=>this.createTestDataSourceResponse(e?Ke.Success:Ke.Error)),(0,Ye.catchError)(()=>(0,Ye.of)(this.createTestDataSourceResponse(Ke.Error))));return yield(0,Ye.lastValueFrom)(e)},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){Ze(i,n,o,a,s,"next",e)}function s(e){Ze(i,n,o,a,s,"throw",e)}a(void 0)})}).call(this);var e}query(e){const{scopedVars:t}=e,r=e.targets.map(r=>{const{dimensions:n,metrics:o,filters:i,sortBys:a,reportLink:s,refId:l}=r,{from:c,to:u}=e.range,p=tt({},(0,m.omitBy)({dimensions:n,metrics:o,filters:i,sortBys:a},m.isEmpty)),d=(0,m.isEmpty)(t)?p:JSON.parse((0,Xe.getTemplateSrv)().replace(JSON.stringify(p),t));return(0,Ye.forkJoin)([(0,Xe.getBackendSrv)().fetch({method:"POST",url:`${nt.getBackendDataSourceUrl(this.id)}/${nt.DATA}`,data:{body:d,from:c.toISOString(),to:u.toISOString()},params:{targetUrl:s},hideFromInspector:!1}),nt.discoveryApi(this.id,s||"")]).pipe((0,Ye.map)(([{data:{data:e}},t])=>({data:[nt.convertToDataFrame(e,t,l,n)]})))});return(0,Ye.forkJoin)([...r]).pipe((0,Ye.map)(e=>({data:e.map(e=>e.data).flat()})))}static convertToDataFrame(e,{dimensions:t,metrics:r},n,o){const i=[...t,...r],a=new p.MutableDataFrame({fields:(0,m.uniq)(null==e?void 0:e.map(e=>Object.keys(e)).flat()).map(e=>{const t=i.find(({name:t})=>t===e),r={name:e,refId:n};return t?(o=tt({},r),a=null!=(a={type:nt.getFieldDataType(t)})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}),o):r;var o,a})});if("variable-query"===n){a.fields.forEach(e=>{(null==o?void 0:o.includes(e.name))&&e.type!==p.FieldType.time&&(e.type=p.FieldType.string)});const e=a.fields.filter(({type:e})=>e===p.FieldType.string),t=null==o?void 0:o.find(t=>e.find(({name:e})=>e===t)),r=e.find(e=>e.name===t);r&&(a.fields=a.fields.filter(({type:e})=>e!==p.FieldType.string),a.fields.push(r))}null==e||e.forEach(e=>a.add(e));const s=a.fields.find(e=>e.type===p.FieldType.time);if(s)for(let e=0;e<s.values.length;e++)s.values.set(e,s.values.get(e)*nt.MILLISECONDS_IN_SECOND);return a}createTestDataSourceResponse(e){return e===Ke.Error?{status:Ke.Error,message:"Data source test failed. Check credentials and try again."}:{status:Ke.Success,message:"Data source is working properly."}}static getFieldDataType({type:e}){return Je.includes(e)?p.FieldType.time:e.toLowerCase()===p.FieldType.string?p.FieldType.string:p.FieldType.number}constructor(e){super(e),et(this,"instanceSettings",void 0),this.instanceSettings=e,this.variables=new rt(this)}}et(nt,"DISCOVERY","discovery"),et(nt,"REPORTS","reports"),et(nt,"DATA","data"),et(nt,"MILLISECONDS_IN_SECOND",1e3),et(nt,"DISCOVERY_CACHE_RETURN_DELAY",100),et(nt,"cachedDiscoveryAPIMap",new Map);class ot{static getDataSourceParts(e){return e.replace("/reporting-api/v2/reports/","").split("/")}static getCascaderOptions(e){const t=e.reports.map(({reportLink:e})=>e).map(e=>({reportLink:e,items:ot.getDataSourceParts(e)})),r=(0,m.groupBy)(t,({items:[e]})=>e),n=Object.keys(r).map(e=>({[e]:(0,m.groupBy)(r[e],({items:[,e]})=>e)}));return n.map(e=>Object.keys(e).map(t=>V({value:t,items:Object.keys(e[t]).map(r=>({value:r,items:e[t][r].map(({reportLink:e,items:[,,t]})=>({value:e,label:t}))}))}))).flat()}}const it=new p.DataSourcePlugin(nt).setConfigEditor(function({options:e,onOptionsChange:t}){const r=e.secureJsonData||{},[n,o]=(0,f.useState)(!1),i=({target:{value:n}},o)=>{const i=F(_({},r),{[o]:n});t(F(_({},e),{secureJsonData:i}))},{clientSecret:a,host:s,clientToken:l,accessToken:c}=r;return y().createElement("div",{className:"gf-form-group"},y().createElement("div",{className:"credentials__container"},y().createElement(d.Field,{label:"Information",description:"Paste credentials here to auto fill form below"},y().createElement(d.TextArea,{className:"credentials__textarea",name:"credentialsTextArea",invalid:n,onChange:({target:{value:n}})=>{const i=n.split("\n").map(e=>e.trim().split(RegExp("\\s=\\s(.*)","s"))).map(([e,t])=>({[(0,m.camelCase)(e)]:t})).reduce((e,t)=>_({},e,t),{}),a=Object.entries(i),s=a.length!==h.length||a.some(([e,t])=>!h.includes(e)||(0,m.isEmpty)(t));if(o(s),!s){const n=_({},r,i);t(F(_({},e),{secureJsonData:n}))}}}))),y().createElement("hr",null),y().createElement(d.InlineField,{label:"Akamai Client Secret",labelWidth:20},y().createElement(d.Input,{onChange:e=>i(e,g.ClientSecret),value:a||"",placeholder:"Enter client secret",width:60})),y().createElement(d.InlineField,{label:"Host",labelWidth:20},y().createElement(d.Input,{value:s||"",placeholder:"Enter host",width:60,onChange:e=>i(e,g.Host)})),y().createElement(d.InlineField,{label:"Access Token",labelWidth:20},y().createElement(d.Input,{value:c||"",placeholder:"Enter access token",width:60,onChange:e=>i(e,g.AccessToken)})),y().createElement(d.InlineField,{label:"Client Token",labelWidth:20},y().createElement(d.Input,{value:l||"",placeholder:"Enter client token",width:60,onChange:e=>i(e,g.ClientToken)})))}).setQueryEditor(function({query:e,onChange:t,onRunQuery:r,datasource:n}){const[o,i]=(0,f.useState)(Qe),[a,s]=(0,f.useState)(""),[l,c]=(0,f.useState)(!1),[u,p]=(0,f.useState)(!0),[g,h]=(0,f.useState)([]),v=t=>{e.reportLink=t,s(t||""),t&&(c(!0),nt.discoveryApi(n.id,t).subscribe({next:e=>i(e),complete:()=>c(!1)}))};return(0,f.useLayoutEffect)(()=>{const t=nt.reportsApi(n.id).subscribe({next:t=>{h(ot.getCascaderOptions(t)),v(e.reportLink||""),p(!1)},error:()=>{h([]),p(!1)}});return()=>t.unsubscribe()},[n.id]),y().createElement(y().Fragment,null,u?y().createElement(y().Fragment,null,y().createElement(d.Icon,{name:"fa fa-spinner"})," Fetching..."):y().createElement(d.Cascader,{initialValue:a?ot.getDataSourceParts(a).join(" > "):"",placeholder:"Select report data source",allowCustomValue:!0,options:g,changeOnSelect:!1,onSelect:v,displayAllSelectedLevels:!0,separator:" > "}),y().createElement("hr",null),l||(0,m.isEmpty)(o.metrics)||(0,m.isEmpty)(o.dimensions)?l?y().createElement(y().Fragment,null,y().createElement(d.Icon,{name:"fa fa-spinner"})," Fetching..."):"":y().createElement($e,{model:o,query:e,onChange:t,onRunQuery:r,datasource:n}))});return u})());
//# sourceMappingURL=module.js.map